function VerificarDatasDisponiveis(n){return dmy=n.getDate()+"-"+(n.getMonth()+1)+"-"+n.getFullYear(),$.inArray(dmy,DatasDisponiveis)!=-1?[!0,"","Available"]:[!1,"","unAvailable"]}function fillCarregarLista(){var n={anoLetivo:parseInt($("#txtAnoLetivo").val()),codigoDiretoria:parseInt($("#CodigoDiretoria option:selected").val()),codigoEscola:parseInt($("#CodigoEscola option:selected").val()),codigoFechamento:parseInt($("#CodigoTipoEnsino option:selected").val()),codigoTurma:parseInt($("#CodigoTurma option:selected").val())};return JSON.stringify(n)}function CarregarLista(){$(".form").valid()&&$.ajax({type:"POST",async:!0,dataType:"html",data:"{ dto : "+fillCarregarLista()+"}",contentType:"application/json; charset=utf-8",url:"/Planejamento/ListaPlanejamento",success:function(n){$("div#resultadoPesquisa").empty().html(n);$("#imgAtualizar").css("visibility","visible");$("#table").sedDataTable()}})}function fillPlanejamento(){var n=arguments[0],t={cpfProfessor:$(n).data("cpfprofessor"),nomeProfessor:$(n).data("nomeprofessor"),codigoTipoEnsino:parseInt($(n).data("codigotipoensino")),tipoEnsino:$(n).data("tipoensino"),codigoTurma:parseInt($(n).data("codigoturma")),turma:$(n).data("turma"),codigoSubTurma:parseInt($(n).data("codigosubturma")),subturma:$(n).data("nomesubturma"),periodo:$(n).data("periodo"),codigoDisciplina:parseInt($(n).data("codigodisciplina")),disciplina:$(n).data("disciplina"),codigoEscola:parseInt($(n).data("codigoescola")),nomeEscola:$(n).data("nomeescola"),codigoDiretoria:parseInt($(n).data("codigodiretoria")),anoLetivo:parseInt($("#txtAnoLetivo").val())};return JSON.stringify(t)}function AbrirPlanejamentoView(n){$.ajax({type:"POST",async:!0,dataType:"html",contentType:"application/json; charset=utf-8",data:"{ view : "+fillPlanejamento(n)+"}",url:"/Planejamento/SelecionaBimestreView",success:function(n){$("#dialog").html(n).dialog({width:900,draggable:!0,modal:!0,resizable:!1,position:"top"})}})}function AbrirPlanejamento(n){var t=parseInt($(n).data("codigosubturma")),i=parseInt($("#txtAnoLetivo").val());$.ajax({type:"POST",async:!0,dataType:"html",data:{cpfProfessor:$(n).data("cpfprofessor"),nomeProfessor:$(n).data("nomeprofessor"),codigoTipoEnsino:parseInt($(n).data("codigotipoensino")),tipoEnsino:$(n).data("tipoensino"),codigoTurma:parseInt($(n).data("codigoturma")),turma:$(n).data("turma"),codigoSubTurma:t,subturma:$(n).data("nomesubturma"),periodo:$(n).data("periodo"),codigoDisciplina:parseInt($(n).data("codigodisciplina")),disciplina:$(n).data("disciplina"),codigoEscola:parseInt($(n).data("codigoescola")),nomeEscola:$(n).data("nomeescola"),codigoDiretoria:parseInt($(n).data("codigodiretoria")),anoLetivo:i},url:"/Planejamento/SelecionaBimestre",success:function(n){$("#dialog").html(n).dialog({width:900,draggable:!0,modal:!0,resizable:!1,position:"top"})}})}function AbrirAula(n){var t=parseInt($("#txtAnoLetivo").val());$.ajax({type:"POST",async:!0,dataType:"html",data:{cpfProfessor:$(n).data("cpfprofessor"),codigoTipoEnsino:parseInt($(n).data("codigotipoensino")),tipoEnsino:$(n).data("tipoensino"),codigoTurma:parseInt($(n).data("codigoturma")),turma:$(n).data("turma"),periodo:$(n).data("periodo"),codigoEscola:parseInt($(n).data("codigoescola")),nomeEscola:$(n).data("nomeescola"),codigoDiretoria:parseInt($(n).data("codigodiretoria")),anoLetivo:t},url:"/Planejamento/SelecionaBimestre",success:function(n){$("#dialog").html(n).dialog({width:900,draggable:!0,modal:!0,resizable:!1,position:"top"})},error:function(){}})}function CarregarAulas(){$("#ddlListaBimestres").val().length>0&&$.ajax({type:"POST",async:!0,dataType:"html",data:{codigoDiretoria:$("#txtCodigoDiretoria").val(),codigoEscola:$("#txtCodigoEscola").val(),codigoTurma:$("#txtCodigoTurma").val(),codigoEvento:TratarValorNumerico($("#ddlListaBimestres").val()),cpfProfessor:$("#txtCpfProfessor").val(),anoLetivo:parseInt($("#txtAnoLetivo").val()),CodigoFechamento:$("#ddlListaBimestres option:selected ").val()},url:"/Planejamento/AulaPlanejadaAulaDada",success:function(n){$("#AulasDadasPlanejadas").html(n);$("#tableAulas").sedDataTable()},error:function(){}})}function fillCarregarAulas(){var n={codigoDiretoria:$("#txtCodigoDiretoria").val(),codigoEscola:$("#txtCodigoEscola").val(),codigoTurma:$("#txtCodigoTurma").val(),codigoEvento:TratarValorNumerico($("#ddlListaBimestres").val()),cpfProfessor:$("#txtCpfProfessor").val(),anoLetivo:parseInt($("#txtAnoLetivo").val()),CodigoFechamento:$("#ddlListaBimestres option:selected ").val()};return JSON.stringify(n)}function CarregarAulas(){$("#ddlListaBimestres").val().length>0&&$.ajax({type:"POST",async:!0,dataType:"html",data:{codigoDiretoria:$("#txtCodigoDiretoria").val(),codigoEscola:$("#txtCodigoEscola").val(),codigoTurma:$("#txtCodigoTurma").val(),codigoEvento:TratarValorNumerico($("#ddlListaBimestres").val()),cpfProfessor:$("#txtCpfProfessor").val(),anoLetivo:parseInt($("#txtAnoLetivo").val()),CodigoFechamento:$("#ddlListaBimestres option:selected ").val()},url:"/Planejamento/AulaPlanejadaAulaDada",success:function(n){$("#AulasDadasPlanejadas").html(n);$("#tableAulas").sedDataTable()},error:function(){}})}var anoLetivoAnterior,mandeiFechar,VerificarMudancaAnoLetivo=function(n,t,i,r,u,f,e){n.get(0).tagName=="INPUT"?(n.focus(function(){anoLetivoAnterior=n.val();$(document).keypress(function(n){if(n.which==13)return!1})}),n.blur(function(){var n=$(this).val();n!=anoLetivoAnterior&&o($(this),anoLetivoAnterior)})):n.get(0).tagName=="SELECT"&&(n.click(function(){anoLetivoAnterior=n.val()}),n.change(function(){o($(this),anoLetivoAnterior)}));var o=function(n,o){Mensagem.Alert({titulo:"Atenção!",mensagem:"Ao alterar o valor do ano letivo, todos os dados informados no formulário serão perdidos. Deseja continuar?",tipo:"aviso",botoes:[{botao:"Sim",callback:function(){var o="<option value=''>Selecione...<\/option>";t.attr("selected","selected");i.empty();i.html(o);r.empty();r.html(o);u.empty();u.html(o);f.empty();f.html(o);e.empty();e.html(o);AnoLetivoAnterior=$(n).val();$.unblockUI()}},{botao:"Não",callback:function(){$(n).val(o);$.unblockUI();$(n).focus()}}]})}},functionCarregarAulas;$().ready(function(){PreenchimentoAutomaticoCombos();$("#btnPesquisarPlanejamento").click(function(n){n.preventDefault();$(".form").valid()&&ConsultarPlanejamento()});$("#btnPesquisar").click(function(n){n.preventDefault();$(".form").valid()&&CarregarTurmasProfessorAnoLetivo()});$("#btnPesquisarTurmasProf").click(function(n){n.preventDefault();$(".form").valid()&&CarregarTurmasProfessor()});$("#dialogDetalhe").dialog({autoOpen:!1,position:"top",width:835,resizable:!1,modal:!0,dragable:!1,show:{effect:"blind",duration:200},beforeClose:function(){return($("#DataAula").datepicker("hide"),mandeiFechar)?($("#DataAula").datepicker("hide"),CarregarCalendario($("#hdfTurma").val(),$("#hdfDisciplina").val(),$("#hdfAnoAtual").val(),$("#hdfMesAtual").val()),!0):(Mensagem.Alert({titulo:"Atenção!",mensagem:"Os dados inseridos não foram salvos. Deseja continuar?<br />Obs.: Para salvar os dados, clique no botão “Alterar” localizado no final da página!",tipo:"aviso",botoes:[{botao:"Sim",callback:function(){mandeiFechar=!0;$("#dialogDetalhe").dialog("close");$.unblockUI()}},{botao:"Não",callback:function(){$.unblockUI()}}]}),!1)}})});var TratarValorNumerico=function(n){return n==undefined?0:n==""?0:isNaN(n)?0:parseInt(n)},PreenchimentoAutomaticoCombos=function(){$("#CodigoDiretoria").autoPreencher($("#CodigoEscola"),"Escola","CarregarListaEscolas");$("#CodigoEscola").autoPreencher($("#CodigoTipoEnsino"),"TipoEnsino","CarregarListaTiposEnsino",[{id:"CodigoEscola",AnoLetivo:"txtAnoLetivo"}]);$("#CodigoTipoEnsino").autoPreencher($("#CodigoTurma"),"Turma","CarregarListaTurmaPorTipoEnsino",[{CodigoEscola:"CodigoEscola",CodigoTipoEnsino:"CodigoTipoEnsino",AnoLetivo:"txtAnoLetivo"}]);$("#CodigoTurma").autoPreencher($("#CodigoDisciplina"),"Disciplina","CarregarListaDisciplinas")},ConsultarPlanejamento=function(){if(TratarValorNumerico($("#txtAnoLetivo").val())<=0||TratarValorNumerico($("#CodigoDiretoria").val())<=0||TratarValorNumerico($("#CodigoEscola").val())<=0||TratarValorNumerico($("#CodigoTipoEnsino").val())<=0){Mensagem.Alert({titulo:"Aviso",mensagem:"Preencha o filtro mínimo.",tipo:"Aviso",botao:"Fechar"});return}AbrirMensagemCarregandoPagina();$.ajax({cache:!1,url:"/Planejamento/ConsultaPlanejamentoParcial",type:"POST",datatype:"html",data:{codigoDiretoria:TratarValorNumerico($("#CodigoDiretoria").val()),codigoEscola:TratarValorNumerico($("#CodigoEscola").val()),codigoTipoEnsino:TratarValorNumerico($("#CodigoTipoEnsino").val()),codigoTurma:TratarValorNumerico($("#CodigoTurma").val()),codigoDisciplina:TratarValorNumerico($("#CodigoDisciplina").val()),anoLetivo:TratarValorNumerico($("#txtAnoLetivo").val())},success:function(n){$(".resultadoPesquisa").html(n);$("#tabelaDadosResultadoFiltro").sedDataTable()},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})},CarregarCalendario=function(n,t,i,r){AbrirMensagemCarregandoPagina();TratarValorNumerico(r)>12&&(i=TratarValorNumerico(i)+1,r=1);TratarValorNumerico(r)<1&&(i=TratarValorNumerico(i)-1,r=12);$("#hdfMesAtual").val(r);$("#hdfAnoAtual").val(i);$.ajax({cache:!1,url:"/Planejamento/CarregarCalendario",type:"POST",data:{codigoTurma:TratarValorNumerico(n),codigoDisciplina:TratarValorNumerico(t),ano:TratarValorNumerico(i),mes:TratarValorNumerico(r)},success:function(n){$("#calendario").html(n);$("#Mes").html(ObterMesAno(r,i));BloquearNavegacaoCalendario();LimparCalendario();VerificarDiasLetivosCalendario($("#dp_month"),$("#hdfDiretoria").val(),$("#hdfEscola").val(),$("#hdfAnoAtual").val(),$("#hdfMesAtual").val())},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})},LimparCalendario=function(){$.expr[":"].contentIs=function(n,t,i){return $(n).text()===i[3]};$(":contentIs(DEMO)").remove();$("#dp_month").find(".month_blue_header_inner").each(function(){switch($(this).html()){case"domingo":$(this).html("Domingo");break;case"segunda-feira":$(this).html("Segunda-feira");break;case"terça-feira":$(this).html("Terça-feira");break;case"quarta-feira":$(this).html("Quarta-feira");break;case"quinta-feira":$(this).html("Quinta-feira");break;case"sexta-feira":$(this).html("Sexta-feira");break;case"sábado":$(this).html("Sábado")}});$("#dp_month").each(function(){for(var i,t=$(this).find(".month_blue_cell_inner"),n=0;n<t.length;n++)i=$(t[n]).find(".month_blue_cell_header").html(),isNaN(i)&&$(t[n]).find(".month_blue_cell_header").html("1")});$("#dp_month").each(function(){for(var i,f,r,u,e=0,t=$(this).find(".month_blue_cell_inner"),o=parseInt($(t).first().find(".month_blue_cell_header").html()),n=0;n<t.length;n++)if(u=parseInt($(t[n]).find(".month_blue_cell_header").html()),o+1==u||u==1&&u!=o){e=n;break}for(i=0,f=0;f<e;f++)for(r=0;r<7;r++)n=r*e+f,u=parseInt($(t[n]).find(".month_blue_cell_header").html()),u==1?i==0?(i=1,(r==0||r==6)&&$(t[n]).css("background-color","#FFF0F0")):i==1&&(i=2,$(t[n]).find(".month_blue_cell_header").html(""),$(t[n]).css("background-color","#EEEEEE")):i==0||i==2?($(t[n]).find(".month_blue_cell_header").html(""),$(t[n]).css("background-color","#EEEEEE")):(r==0||r==6)&&$(t[n]).css("background-color","#FFF0F0");i=0})},ObterMesAno=function(n,t){switch(TratarValorNumerico(n)){case"01":case 1:return"Janeiro/"+t;case"02":case 2:return"Fevereiro/"+t;case"03":case 3:return"Março/"+t;case"04":case 4:return"Abril/"+t;case"05":case 5:return"Maio/"+t;case"06":case 6:return"Junho/"+t;case"07":case 7:return"Julho/"+t;case"08":case 8:return"Agosto/"+t;case"09":case 9:return"Setembro/"+t;case"10":case 10:return"Outubro/"+t;case"11":case 11:return"Novembro/"+t;case"12":case 12:return"Dezembro/"+t;default:return"Indefinido"}},DetalharPlanejamento=function(n,t,i,r,u,f){AbrirMensagemCarregandoPagina();$.ajax({cache:!1,url:"/Planejamento/DetalharPlanejamento",type:"POST",data:{codigoPlanejamento:TratarValorNumerico(n),codigoTurma:TratarValorNumerico(t),codigoDisciplina:TratarValorNumerico(i),dataAula:r,horaInicio:u,horaFim:f},success:function(n){if($("#dialogDetalhe").html(n),bimestre=parseInt($("#hdfBimestrePlan").val()),bimestre<1||bimestre>4){$("#dialogDetalhe").html("");return}mandeiFechar=!0;$("#dialogDetalhe").dialog("open");InicializarVisualizacaoPlanejamentoConteudo();ConfigurarBotaoEditar();ConfigurarBotaoRealizar();ExcluirPlanejamento()},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})},ConfigurarBotaoEditar=function(){AbrirMensagemCarregandoPagina();$("#btnEditar").click(function(){$.ajax({cache:!1,url:"/Planejamento/Editar",type:"POST",data:{},success:function(n){$("#dialogDetalhe").html(n);InicializarPlanejamentoConteudo();RecuperarDisponibilidadeData();AplicarMascaras();$("#frmEditar").validate({rules:{DataAula:{required:!0,dataValida:!0},HoraAula:{required:!0}}});mandeiFechar=!1;$("#HoraAula").val($("#hdfHoraAula").val());$("#btnSalvar").click(function(){if($("#frmEditar").valid()!=!1){if($("#txtConteudoPlan").val()==""&&$(".conteudo:checked").length<=0){Mensagem.Alert({titulo:"Aviso",mensagem:"Conteúdo para a aula não informado.",tipo:"Aviso",botao:"Fechar"});return}$.ajax({cache:!1,url:"/Planejamento/SalvarPlanejamento",type:"POST",traditional:!0,data:{codigoPlanejamento:TratarValorNumerico($("#hdfCodigoPlanejamento").val()),codigoTurma:TratarValorNumerico($("#hdfCodigoTurma").val()),codigoDisciplina:TratarValorNumerico($("#hdfCodigoDisciplina").val()),dataAula:$("#DataAula").val(),horaAula:$("#HoraAula").val(),numBimestre:TratarValorNumerico($("#hdfBimestrePlan").val()),descricaoConteudo:$("#txtConteudoPlan").val(),conteudoCurriculo:RecuperarConteudoPlanejado()},success:function(n){n>0&&(mandeiFechar=!0,DetalharPlanejamento(n,TratarValorNumerico($("#hdfCodigoTurma").val()),TratarValorNumerico($("#hdfCodigoDisciplina").val()),$("#DataAula").val(),"",""))},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})}})},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})})},ConfigurarBotaoRealizar=function(){AbrirMensagemCarregandoPagina();$("#btnRealizar").click(function(){$.ajax({cache:!1,url:"/Planejamento/Realizar",type:"POST",data:{},success:function(n){$("#dialogDetalhe").html(n);InicializarRealizacaoConteudo();mandeiFechar=!1;$("#btnSalvar").click(function(){if($("#txtConteudoPlan").val()==""&&$(".conteudoRealizado").length<=0){Mensagem.Alert({titulo:"Aviso",mensagem:"Conteúdo da aula não informado.",tipo:"Aviso",botao:"Fechar"});return}$.ajax({cache:!1,url:"/Planejamento/SalvarFechamento",type:"POST",dataType:"JSON",traditional:!0,data:{codigoPlanejamento:TratarValorNumerico($("#hdfCodigoPlanejamento").val()),descricaoConteudo:$("#txtConteudoPlan").val(),conteudoRealizado:RecuperarConteudoRealizado()},success:function(n){n>0&&(mandeiFechar=!0,DetalharPlanejamento(n,TratarValorNumerico($("#hdfCodigoTurma").val()),TratarValorNumerico($("#hdfCodigoDisciplina").val()),$("#hdfDataAulaPlan").val(),"",""))},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})})},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})})},BloquearNavegacaoCalendario=function(){var n=TratarValorNumerico($("#hdfAnoAtual").val())*100+TratarValorNumerico($("#hdfMesAtual").val()),t=TratarValorNumerico($("#hdfAnoInicio").val())*100+TratarValorNumerico($("#hdfMesInicio").val()),i=TratarValorNumerico($("#hdfAnoFim").val())*100+TratarValorNumerico($("#hdfMesFim").val());n<=t&&$(".navAnterior").remove();n>=i&&$(".navPosterior").remove()},CarregarTurmasProfessorAnoLetivo=function(){$.ajax({cache:!1,url:"/Planejamento/ConsultarDetalheDisciplinaParcial",type:"POST",data:{anoLetivo:TratarValorNumerico($("#txtAnoLetivo").val())},success:function(n){$("#resultadoDisciplina").html(n);$("#tabelaDadosTurma").sedDataTable()},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})},CarregarTurmasProfessor=function(){$.ajax({cache:!1,url:"/Planejamento/ConsultarTurmasProfessor",type:"POST",data:{anoLetivo:TratarValorNumerico($("#txtAnoLetivo").val())},success:function(n){$("#resultadoDisciplina").html(n);$("#tabelaDadosTurma").sedDataTable()},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})},VisualizarCalendarioPlanejamento=function(n){var t=$(n).attr("CodigoTurma"),i=$(n).attr("CodigoDisciplina");$.ajax({cache:!1,url:"/Planejamento/CalendarioAula",type:"POST",data:{codigoTurma:TratarValorNumerico(t),codigoDisciplina:TratarValorNumerico(i)},success:function(n){$("#Filtro").hide();$("#CalendarioAula").show();$("#CalendarioAula").html(n);CarregarCalendario($("#hdfTurma").val(),$("#hdfDisciplina").val(),$("#hdfAno").val(),$("#hdfMes").val())},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})},VoltarFiltro=function(){$("#btnPesquisarPlanejamento").trigger("click");$("#btnPesquisar").trigger("click");$("#CalendarioAula").hide();$("#Filtro").show()},DatasDisponiveis;var RecuperarDisponibilidadeData=function(){$.ajax({url:"/Planejamento/RecuperarDisponibilidadeData",type:"POST",datatype:"JSON",data:{codigoTurma:TratarValorNumerico($("#hdfTurma").val()),codigoDisciplina:TratarValorNumerico($("#hdfDisciplina").val()),dataAulaAtual:$("#hdfDataAula").val()},success:function(n){DatasDisponiveis=n.DataDisponivel;$("#DataAula").datepicker({beforeShowDay:VerificarDatasDisponiveis,onSelect:ValidarAlteracaoData}).mask("99/99/9999");$("#DataAula").keydown(function(n){return n.keyCode==8||n.keyCode==46?!0:!1})},error:function(){}})},ValidarAlteracaoData=function(){var n=$(this).val();$.ajax({url:"/Planejamento/RecuperarBimestre",type:"POST",datatype:"JSON",data:{dataAula:n,bimestreAtual:$("#hdfBimestrePlan").val()},success:function(t){if(t.alterouBimetre==!0)if(t.bimestre==0){n=$("#hdfDataAula").val();var i=$("#hdfDataAula").val().split("/");$("#DataAula").datepicker("setDate",new Date(i[2],i[1]-1,i[0]));$("#hdfBimestrePlan").val($("#hdfBimestreOrig").val());$("#lblBimestre").html($("#hdfBimestreOrig").val()+"° Bimestre");CarregarDadosEdicao(n)}else $("#hdfBimestrePlan").val(t.bimestre),$("#lblBimestre").html(t.bimestre+"° Bimestre"),CarregarDadosEdicao(n);else CarregarDadosEdicao(n)},error:function(){}})},CarregarDadosEdicao=function(n){$.ajax({url:"/Planejamento/PlanejarCurriculoParcial",type:"POST",datatype:"HTML",data:{dataAula:n,bimestre:$("#hdfBimestrePlan").val()},success:function(n){$("#curriculo").html(n);InicializarPlanejamentoConteudo()},error:function(){}});$.ajax({url:"/Planejamento/RecuperarDisponibilidadeHorario",type:"POST",datatype:"JSON",data:{codigoTurma:TratarValorNumerico($("#hdfTurma").val()),codigoDisciplina:TratarValorNumerico($("#hdfDisciplina").val()),dataAula:n,dataAulaAtual:$("#hdfDataAula").val(),horaAulaAtual:$("#hdfHoraAula").val()},success:function(n){$("#HoraAula").children().remove();$("#HoraAula").append('<option value="">Selecione...<\/option>');for(var t=0;t<n.length;t++)$("#HoraAula").append('<option value="'+n[t].value+'">'+n[t].text+"<\/option>");$("#HoraAula").children().length==2&&$("#HoraAula").children().last().attr("selected","selected")},error:function(){}})},ExcluirPlanejamento=function(){$("#btnExcluir").click(function(){Mensagem.Alert({titulo:"Atenção!",mensagem:"Deseja excluir o planejamento de aula?",tipo:"aviso",botoes:[{botao:"Sim",callback:function(){$.ajax({cache:!1,url:"/Planejamento/ExcluirPlanejamento",type:"POST",datatype:"JSON",data:{codigoPlanejamento:$("#hdfCodigoPlanejamento").val()},traditional:!0,success:function(n){n==1&&(mandeiFechar=!0,$("#dialogDetalhe").dialog("close"))},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})}},{botao:"Não",callback:function(){$.unblockUI()}}]})})},VerificarDiasLetivosCalendario=function(n,t,i,r,u){var f;(f=typeof n=="string"?$("#"+n):$(n),f!=null&&f!=undefined)&&$.ajax({cache:!1,url:"/CalendarioEscolar/ConsultarDiasLetivos",type:"POST",datatype:"JSON",data:{codigoDiretoria:t,codigoEscola:i,anoLetivo:r,mes:u},traditional:!0,success:function(n){$(f).find(".month_blue_cell_inner").each(function(){for(var i,r=parseInt($(this).find(".month_blue_cell_header").html()),t=0;t<n.length;t++)if(i=parseInt(n[t].Dia),i==r){n[t].Letivo==!1?$(this).css("background-color","rgb(255, 240, 240)"):$(this).css("background-color","rgb(255, 255, 255)");break}})},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})};$.validator.addMethod("minTable",function(){var i=$("#dob_day").val(),r=$("#dob_month").val(),u=$("#dob_year").val(),t=new Date,n;return t.setFullYear(u,r-1,i),n=new Date,n.setFullYear(n.getFullYear()-18),n>t},"Erro");$(document).ready(function(){$(".form").validate({rules:{txtAnoLetivo:"required",txtAulaPlanejada:"required",txtAulaRealizada:"required",CodigoDiretoria:"required",CodigoEscola:"required",CodigoTipoEnsino:"required",ddlListaBimestres:"required",CodigoTurma:{required:!0},txtAnoLetivo:{minlength:4}},messages:{txtAnoLetivo:" Obrigatório",txtAulaRealizada:" Obrigatório",txtAulaPlanejada:" Obrigatório",CodigoDiretoria:" Obrigatório",CodigoEscola:" Obrigatório",CodigoTipoEnsino:" Obrigatório",ddlListaBimestres:" Obrigatório",CodigoTurma:" Obrigatório",txtAnoLetivo:" 4 dígitos mínimo"}});$("#txtAnoLetivo").mask("9999");$("#txtAnoLetivoProf").mask("9999");($("#txtAnoLetivoProf").val()!=null||$("#txtAnoLetivoProf").val())&&$.ajax({url:"/Planejamento/ConsultarTurmasProfessor",type:"Post",cache:!1,datatype:"html",data:{anoLetivo:$("#txtAnoLetivo").val()},success:function(n){n!=null&&n!=""&&($("div#resultadoDisciplina").html(n),$("#tableAulas").sedDataTable(),$("#tabelaDadosTurma").sedDataTable())}})});functionCarregarAulas=function(){var n=$("#ddlListaBimestres");n.val()&&$.ajax({type:"POST",async:!0,dataType:"html",contentType:"application/json; charset=utf-8",data:"{ Aulas : "+fillCarregarAulas()+"}",url:"/Planejamento/AulaPlanejadaAulaDadaView",success:function(n){$("#AulasDadasPlanejadas").html(n);$("#tableAulas").sedDataTable()},error:function(){}})};