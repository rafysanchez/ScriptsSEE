function NovaNotificacao(n){n==undefined&&(n=0);$.ajax({type:"GET",async:!0,cache:!1,dataType:"html",data:{codigoNotificacao:n},url:"/Notificacao/Inserir",success:function(n){$("#NovaNotificacao").empty().html(n);$("textarea").css("resize","none");$("#CodigoDiretoria").autoPreencher($("#CodigoEscola"),"Escola","CarregarListaEscolas",null,jQuery("#CodigoDiretoria").val(),undefined,!1);jQuery("#CodigoDiretoria").val(jQuery("#CodigoDiretoriaHidden").val());jQuery("#CodigoDiretoria").change();jQuery("#CodigoEscola").val(jQuery("#CodigoEscolaHidden").val());AplicarMascaras();$("#frmInserir").validate({rules:{Remetente:{required:!0},Assunto:{required:!0},Descricao:{required:!0},CodigoAluno:{number:!0},Cpf:{cpf:!0}},messages:{Remetente:{required:"Obrigatório"},Assunto:{required:"Obrigatório"},Descricao:{required:"Obrigatório"},CodigoAluno:{number:"Campo numérico"},Cpf:{cpf:"CPF inválido"}}});$("#btnSalvar").click(function(n){if(n.preventDefault(),$("#frmInserir").valid())ValidarAbrangencia();else return!1});$("#NovaNotificacao").dialog({width:825,draggable:!1,modal:!0,resizable:!1,show:{},position:"top"})},error:function(){}})}function ValidarAbrangencia(){var t,i,n;t=$("#CodigoDiretoria").val()==null||$("#CodigoDiretoria").val().length==0?0:parseInt($("#CodigoDiretoria").val());i=$("#CodigoEscola").val()==null||$("#CodigoEscola").val().length==0?0:parseInt($("#CodigoEscola").val());n=$("#CodigoPerfil").val()==null||$("#CodigoPerfil").val().length==0?0:parseInt($("#CodigoPerfil").val());var u=$("#CodigoAluno").val()==""?0:parseInt($("#CodigoAluno").val()),f=$("input#Cpf").val(),r=$("#hdnComportamento").val(),o=$("#hdnAdm").val(),e=$("#hdnDiretoria").val();n>0&&r==o||t>0&&n>0&&r==e||t>0&&i>0&&n>0||u>0||f.length>0?Salvar():(n>0&&(t==0&&$("<label class='error'>Obrigatório<\/label>").appendTo("#Diretoria"),i==0&&r!=e&&$("<label class='error'>Obrigatório<\/label>").appendTo("#Escola")),t==0&&i==0&&n==0&&u==0&&f.length==0&&($("<label class='error'>Obrigatório<\/label>").appendTo("#Diretoria"),$("<label class='error'>Obrigatório<\/label>").appendTo("#Escola"),$("<label class='error'>Obrigatório<\/label>").appendTo("#Perfil"),$("<label class='error'>Obrigatório<\/label>").appendTo("#Aluno"),$("<label class='error'>Obrigatório<\/label>").appendTo("p#Cpf")))}function Salvar(){$.ajax({type:"POST",async:!0,cache:!1,data:{Remetente:$("#Remetente").val(),Assunto:$("#Assunto").val(),Descricao:$("#Descricao").val(),CodigoDiretoria:$("#CodigoDiretoria").val(),CodigoEscola:$("#CodigoEscola").val(),CodigoPerfil:$("#CodigoPerfil").val(),CodigoAluno:$("#CodigoAluno").val(),Codigo:jQuery("#Codigo").val(),Cpf:$("input#Cpf").val().replace(".","").replace(".","").replace("-","")},url:"/Notificacao/Inserir",success:function(){$("#NovaNotificacao").dialog("close");CarregarNotificacoes()},error:function(){}})}function Detalhe(n){$.ajax({type:"POST",async:!0,cache:!1,dataType:"html",data:{id:n},url:"/Notificacao/Detalhe",success:function(n){$("#VisualizaNotificacao").empty().html(n);$("textarea").css("resize","none");AplicarMascaras();$("#VisualizaNotificacao").dialog({width:825,draggable:!1,modal:!0,resizable:!1,show:{effect:"blind",duration:1e3},position:"top"})},error:function(){}})}function MarcarVisualizacao(n){var i=$(n).prop("checked"),t=$(n).attr("codNotificacao"),r=$(n).attr("dataVisualizacao");t>0&&$.ajax({type:"POST",async:!0,cache:!1,data:{CodigoNotificacao:t,Lido:i,DataVisualizacao:r},url:"/Notificacao/MarcarVisualizacao",success:function(){},error:function(){}})}function Excluir(n){Mensagem.Alert({titulo:"Atenção!",mensagem:"Deseja realmente excluir a Notificação?",tipo:"aviso",botoes:[{botao:"Sim",callback:function(){$.ajax({type:"POST",async:!0,cache:!1,data:{id:n},url:"/Notificacao/Excluir",success:function(){$("#VisualizaNotificacao").dialog("close");CarregarNotificacoes()},error:function(){}})}},{botao:"Não",callback:function(){$.unblockUI()}}]})}function RemoverNotificacao(n){var t=$(n).parent(),i=t.prop("id");i=="englobaNotificacao"&&$(t).remove();var r=$(n).data("codnotificacao"),u=$(n).data("datavisualizacao");$.ajax({type:"POST",async:!0,cache:!1,data:{CodigoNotificacao:r,Lido:!0,DataVisualizacao:u},url:"/Notificacao/MarcarVisualizacao",success:function(){},error:function(){}})}function CarregarNotificacoes(){$.ajax({type:"GET",async:!0,cache:!1,dataType:"html",url:"/Notificacao/ListarNotificacoes",data:{anoLetivo:parseInt($("#txtAnoLetivo").val())},success:function(n){$("#listaNotificacoes").empty().html(n);$("#tblNotificacoes").sedDataTable()},error:function(){}});$.ajax({type:"GET",async:!0,cache:!1,dataType:"html",url:"/Notificacao/ListarEnviadas",data:{anoLetivo:parseInt($("#txtAnoLetivo").val())},success:function(n){$("#listaEnviadas").empty().html(n);$("#tblNotificacoesEnviadas").sedDataTable()},error:function(){}})}function AlteraVisualizacaoNotificacoes(n){n.id=="radioEnviadas"?jQuery("#fieldsetNotificacoes").slideUp("fast",function(){jQuery("#fieldsetEnviadas").slideDown()}):jQuery("#fieldsetEnviadas").slideUp("fast",function(){jQuery("#fieldsetNotificacoes").slideDown()})}var mensagemManutencao=function(){Mensagem.Alert({titulo:"Aviso",mensagem:"O Secretaria Escolar Digital está passando por melhorias e ajustes para servi-lo ainda melhor, e por conta dessa ação, instabilidades estão ocorrendo em algumas aplicações do sistema, como por exemplo, o GeekieLab.  Já estamos atuando para rapidamente solucionar os problemas que surgiram nas últimas semanas e, nesse sentido, agradecemos a sua compreensão. \n- Equipe SED",tipo:"Aviso",botoes:[{botao:"Não exibir novamente",callback:function(){$.cookie("msgManutencao",!1);$.unblockUI()}},{botao:"Fechar",callback:function(){$.unblockUI()}}]})};$().ready(function(){Mensagem.CarregarMensagens(null,2500);($.cookie("msgManutencao")==undefined||$.cookie("msgManutencao")==null)&&$.cookie("msgManutencao",!0);$.cookie("msgManutencao")=="true"&&mensagemManutencao()});
/*
//# sourceMappingURL=Notificacao.min.js.map
*/