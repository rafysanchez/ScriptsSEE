function FormularioInserirPerfil(){$.get("/Perfil/InserirPerfil",function(n){$("#formDialog").html(n).dialog({width:830,draggable:!1,modal:!0,resizable:!1,show:{effect:"blind",duration:1e3},position:"top"});CarregarValidacoes($("#FormInserir"));autoCompletarSetor();CarregarAutoComplete();$("#btnInserir").click(function(n){n.preventDefault();$("#FormInserir").valid()&&$("#FormInserir").submit()})})}function FormularioEditarPerfil(n){$.ajax({type:"GET",dataType:"html",url:"/Perfil/EditarPerfil/"+n,success:function(n){$("#formDialog").html(n);$("#formDialog").dialog({width:830,draggable:!1,modal:!0,resizable:!1,show:{effect:"blind",duration:1e3},position:"top"});CarregarValidacoes($("#FormEditar"));CarregarAutoComplete();autoCompletarSetor();$("#btnEditar").click(function(n){n.preventDefault();$("#FormEditar").valid()&&$("#FormEditar").submit()})},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})}function CarregarValidacoes(n){n.validate({rules:{DescricaoPerfil:"required",Nivel:{required:!0,number:!0,range:[1,Infinity]},CodigoComportamento:"required"},messages:{DescricaoPerfil:"Obrigatório.",Nivel:{required:"Obrigatório",number:"Informe apenas números.",range:"somente valores maiores que zero."},CodigoComportamento:"Obrigatório."}})}function autoCompletarSetor(){$(".selCentro").autocomplete({source:function(){$.ajax({type:"POST",url:"/Perfil/SelecionaSetor",dataType:"json",global:!1,data:{nmSetor:$("#txtCentro").val()},success:function(n){return n}})},minLength:4})}function CarregarAutoComplete(){$(".selFiltroCargo").autocomplete({source:function(n,t){$.ajax({url:"/Perfil/PesquisarCargos",dataType:"json",global:!1,cache:!1,data:{textoBusca:$(".selFiltroCargo").val()},success:function(n){t($.map(n,function(n){return{label:n.DescricaoCargo,value:n.DescricaoCargo,id:n.CodigoCargo}}))}})},select:function(n,t){$(".selCodigoCargo").val(t.item.id);$(".selDescricaoCargo").val(t.item.label)},minLength:4});$(".selAdicionarCargo").click(function(n){var t,r,i;n.preventDefault();t=$(".selCodigoCargo").val();r=$(".selDescricaoCargo").val();t!="0"&&$(".selCargos input[value="+t+"]").length===0&&(i=GerarIndice(),$(".selCargos").show().append('<tr cdCargo="'+t+'" index="'+i+'"><td><div class="selDialog" style="display: none;"><\/div><input type="hidden" name="Cargos.Index" value="'+i+'" /><input type="hidden" name="Cargos['+i+'].CodigoCargo" value="'+t+'" /><input type="hidden" name="Cargos['+i+'].DescricaoCargo" value="'+r+'" />'+r+'<\/td><td class="td75"><a onclick="AbrirSetores('+t+')"><i class="icone-tabela-lista" title="Setores"><\/i><\/a><\/td><td class="btnExcluir td75"><a onclick="ExcluirCargo($(this).parent().parent())"><i class="icone-tabela-excluir" title="Excluir"><\/i><\/a><\/td><\/tr>'),$.get("/Perfil/Setores",{cdCargo:t},function(n){$(".selCargos tr[cdCargo="+t+"]").find(".selDialog").html(n)}),$(".selCodigoCargo").val("0"),$(".selDescricaoCargo").val(""),$(".selFiltroCargo").val(""));$(".selCargos tbody tr").each(function(n){n%2==0?$(this).attr("class","odd"):$(this).attr("class","even")})})}function AbrirSetores(n){$(".selCdCargo[value="+n+"]").parents(".selDialog").dialog({width:600,draggable:!1,modal:!0,resizable:!1,position:"top"})}function ExcluirCargo(n){var t=n.attr("cdCargo");$(".selCdCargo[value="+t+"]").parents(".selDialog").remove();n.remove()}function AdicionarSetor(n){var r=n.find(".selCdCargo").val(),t=n.find(".selCdSetor").val();if(!(n.find("tr[cdSetor="+t+"]").length>0)){var i=$(".selCargos tr[cdCargo="+r+"]"),u=i.attr("index"),f=GerarIndice();i.find("td:first").append($("<input/>",{type:"hidden",name:"Cargos["+u+"].Setores.Index",value:f,"class":"hdn"+t}));i.find("td:first").append($("<input/>",{type:"hidden",name:"Cargos["+u+"].Setores["+f+"].CdSetor",value:t,"class":"hdn"+t}));n.find(".tblSetores").append("<tr cdSetor="+t+"><td>"+n.find(".selCdSetor option:selected").text()+'<\/td><td><a onclick="ExcluirSetor('+r+", "+t+', $(this).parent().parent())"><i class="icone-tabela-excluir" title="Excluir"><\/i><\/a><\/td><\/tr>');n.find(".selCdSetor option:first").prop("selected",!0)}}function ExcluirSetor(n,t,i){$(".selCargos").find("tr[cdCargo="+n+"]").find(".hdn"+t).remove();i.remove()}
/*
//# sourceMappingURL=Perfil.min.js.map
*/