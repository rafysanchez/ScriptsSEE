function PesquisarBanca() { if ($("select#CodigoDiretoria").val() == "" && $("select#CodigoEscola").val() == null || $("select#CodigoDiretoria").val() != "" && $("select#CodigoEscola").val() == "") ExibirErro(); else $.ajax({ url: "/Banca/ConsultaBancaParcial", type: "GET", data: { CodigoEscola: $("select#CodigoEscola").val() }, success: function (n) { $("div#dadosBanca").html(n); $("#tabelaDados").sedDataTable(); AplicarMascaras() }, error: function () { alert("Ocorreu um erro ao pesquisar a banca.") } }) } function SelecionaFuncionarioEscola(n) { n == "Editar" ? $("select#ListaEscolaEditar").change(function () { $("select#ListaEscolaEditar").val() != "" && $.ajax({ url: "/Banca/SelecionaFuncionariosEscola", type: "GET", dataType: "json", data: { CodigoEscola: $("select#ListaEscolaEditar").val() }, success: function (n) { $("#txtIntegrantesBancaEditar").autocomplete({ source: n, minLength: 3, select: function (n, t) { return $('input[name="txtIntegrantesBancaEditar"]').val(t.item.label), $('input[name="hdnCPFEditar"]').val(t.item.value), !1 } }) } }) }) : $("select#ListaEscolaInserir").change(function () { $("select#ListaEscolaInserir").val() != "" && $.ajax({ url: "/Banca/SelecionaFuncionariosEscola", type: "GET", dataType: "json", data: { CodigoEscola: $("select#ListaEscolaInserir").val() }, success: function (n) { $("#txtIntegrantesBancaInserir").autocomplete({ source: n, minLength: 3, select: function (n, t) { return $('input[name="txtIntegrantesBancaInserir"]').val(t.item.label), $('input[name="hdnCPFInserir"]').val(t.item.value), !1 } }) } }) }) } function InserirFuncionarioNaGridInserir() { var t = $("#tabelaDadosInserir").dataTable(), i = $("#txtIntegrantesBancaInserir").val(), n = $("#hdnCPFInserir").val(); if (n == "") return alert("Selecione ao menos uma pessoa para a banca."), !1; if ($("#tabelaDadosInserir").html().indexOf(n) != -1) return alert("A pessoa selecionada já foi inserida nesta banca."), !1; t.fnAddData([i, n, "<select><option value='1'>Responsável<\/option><option value='2' selected>Participante<\/option><\/select>", "<a href='javascript:void(0)' onclick='RemoverFuncionarioDaGridInserir(this);'><img alt='Remover' src='https://sedseecdn.azureedge.net/sed/imagens/glyphicons-halflings_39.png' title='Deletar' class='imagem' /><\/a>"]); t.fnAdjustColumnSizing(); $("#txtIntegrantesBancaInserir").val(""); $("#hdnCPFInserir").val("") } function InserirFuncionarioNaGridEditar() { var t = $("#tabelaDadosEditar").dataTable(), i = $("#txtIntegrantesBancaEditar").val(), n = $("#hdnCPFEditar").val(); if (n == "") return alert("Selecione ao menos uma pessoa para a banca."), !1; if ($("#tabelaDadosEditar").html().indexOf(n) != -1) return alert("A pessoa selecionada já foi inserida nesta banca."), !1; t.fnAddData([i, n, "<select><option value='1'>Responsável<\/option><option value='2' selected>Participante<\/option><\/select>", "<a href='javascript:void(0)' onclick='RemoverFuncionarioDaGridEditar(this);'><img alt='Remover' src='https://sedseecdn.azureedge.net/sed/imagens/glyphicons-halflings_39.png' title='Deletar' class='imagem' /><\/a>"]); t.fnAdjustColumnSizing(); $("#txtIntegrantesBancaEditar").val(""); $("#hdnCPFEditar").val("") } function RemoverFuncionarioDaGridEditar(n) { var t = $("#tabelaDadosEditar").dataTable(), i = $(n).closest("tr").get(0); t.fnDeleteRow(t.fnGetPosition(i)) } function RemoverFuncionarioDaGridInserir(n) { var t = $("#tabelaDadosInserir").dataTable(), i = $(n).closest("tr").get(0); t.fnDeleteRow(t.fnGetPosition(i)) } function CriarArrayIntegrantesBancaEditar() { var f = $("#tabelaDadosEditar").dataTable(), r = f.fnGetData().length, u, t, i, n; if (r == 0) return u = "É necessário escolher pelo menos um integrante para a banca.", Mensagem.Alert({ titulo: "Banca", mensagem: u, tipo: "Aviso", botao: "Fechar" }), !1; for (t = [], i = [], n = 0; n < r; n++) t[n] = $("#tabelaDadosEditar tbody tr:eq(" + n + ") td:eq(1)").html(), i[n] = $("#tabelaDadosEditar tbody tr:eq(" + n + ") td:eq(2) select option:selected").val(), i[n] == 1 && $("#CpfResponsavel").attr("value", t[n]); return $("#CpfIntegranteBanca").attr("value", t), $("#Papel_Integrantes_Banca").attr("value", i), !0 } function CriarArrayIntegrantesBancaInserir() { var f = $("#tabelaDadosInserir").dataTable(), r = f.fnGetData().length, u, t, i, n; if (r == 0) return u = "É necessário escolher pelo menos um integrante para a banca.", Mensagem.Alert({ titulo: "Banca", mensagem: u, tipo: "Aviso", botao: "Fechar" }), !1; for (t = [], i = [], n = 0; n < r; n++) t[n] = $("#tabelaDadosInserir tbody tr:eq(" + n + ") td:eq(1)").html(), i[n] = $("#tabelaDadosInserir tbody tr:eq(" + n + ") td:eq(2) select option:selected").val(), i[n] == 1 && $("#CpfResponsavel").attr("value", t[n]); return $("#CpfIntegranteBanca").attr("value", t), $("#Papel_Integrantes_Banca").attr("value", i), !0 } function CriaGridFuncionariosEdicao() { var n = $("#tabelaDadosEditar").dataTable(); $.ajax({ url: "/Banca/CriaGridFuncionariosEdicao", type: "GET", dataType: "json", data: { CodigoBanca: $("#CodigoBanca").val() }, success: function (t) { var i, r, u; for (i in t) r = t[i].PapelNaBanca == 1 ? "<select><option value='1' selected>Responsável<\/option><option value='2'>Participante<\/option><\/select>" : "<select><option value='1'>Responsável<\/option><option value='2' selected>Participante<\/option><\/select>", u = t[i].Cpf.substring(0, 3) + "." + t[i].Cpf.substring(3, 6) + "." + t[i].Cpf.substring(6, 9) + "-" + t[i].Cpf.substring(9, 11), n.fnAddData([t[i].Nome, u, r, "<a href='javascript:void(0)' onclick='RemoverFuncionarioDaGridEditar(this);'><img alt='Remover' src='https://sedseecdn.azureedge.net/sed/imagens/glyphicons-halflings_39.png' title='Deletar' class='imagem' /><\/a>"]), n.fnAdjustColumnSizing() } }) } function VerificarResponsavel(n) { var u, f, t, i, r; for (u = n == "Inserir" ? $("#tabelaDadosInserir").dataTable() : $("#tabelaDadosEditar").dataTable(), f = u.fnGetData().length, t = 0, i = 0; i < f; i++) n == "Inserir" ? $("#tabelaDadosInserir tbody tr:eq(" + i + ") td:eq(2) select option:selected").val() == 1 && t++ : $("#tabelaDadosEditar tbody tr:eq(" + i + ") td:eq(2) select option:selected").val() == 1 && t++; return t == 0 ? (r = "É necessário escolher um reponsável para a banca.", Mensagem.Alert({ titulo: "Banca", mensagem: r, tipo: "Erro", botao: "Fechar" }), !1) : t == 1 ? !0 : (r = "A banca só pode ter um responsável.", Mensagem.Alert({ titulo: "Banca", mensagem: r, tipo: "Erro", botao: "Fechar" }), !1) } function VerificarParticipante(n) { var r, u, i, t, f; for (r = n == "Inserir" ? $("#tabelaDadosInserir").dataTable() : $("#tabelaDadosEditar").dataTable(), u = r.fnGetData().length, i = 0, t = 0; t < u; t++) n == "Inserir" ? $("#tabelaDadosInserir tbody tr:eq(" + t + ") td:eq(2) select option:selected").val() == 2 && i++ : $("#tabelaDadosEditar tbody tr:eq(" + t + ") td:eq(2) select option:selected").val() == 2 && i++; return i == 0 ? (f = "É necessário escolher pelo menos um participante para a banca.", Mensagem.Alert({ titulo: "Banca", mensagem: f, tipo: "Erro", botao: "Fechar" }), !1) : !0 } function FormularioInserirBanca() { $.post("/Banca/InserirBanca", function (n) { $("#formDialog").html(n); $("#formDialog").dialog({ width: 830, draggable: !1, modal: !0, resizable: !1, show: { effect: "blind", duration: 1e3 }, position: "top" }); $("#ListaDiretoriaInserir").autoPreencher($("#ListaEscolaInserir"), "Escola", "CarregarListaEscolas"); SelecionaFuncionarioEscola("Inserir"); $("#tabelaDadosInserir").sedDataTable(); $("#FormInserir").validate({ rules: { CodigoDiretoria: "required", CodigoEscola: "required", CpfCriador: { required: !0, cpf: !0 }, DescricaoBanca: { required: !0, maxlength: 200 } }, messages: { CodigoDiretoria: "Obrigatório", CodigoEscola: "Obrigatório", CpfCriador: { required: "Obrigatório", cpf: "CPF inválido" }, DescricaoBanca: { required: "Obrigatório", maxlength: "Apenas 200 caracteres" } } }); $("#btnSalvar").click(function (n) { n.preventDefault(); $("#FormInserir").valid() && CriarArrayIntegrantesBancaInserir() == !0 && VerificarResponsavel("Inserir") == !0 && VerificarParticipante("Inserir") && $.ajax({ type: "POST", data: { CodigoDiretoria: $("#ListaDiretoriaInserir option:selected").val(), CodigoEscola: $("#ListaEscolaInserir option:selected").val(), DescricaoBanca: $("#DescricaoBanca").val(), CpfCriador: $("#CpfResponsavel").val(), CpfIntegranteBanca: $("#CpfIntegranteBanca").val(), Papel_Integrantes_Banca: $("#Papel_Integrantes_Banca").val() }, url: "/Banca/GravarBanca/", success: function () { $("#CodigoDiretoria option:selected").val() == "" ? $("#formDialog").dialog("close") : ($("#formDialog").dialog("close"), $("#btnPesquisar").trigger("click")) } }) }) }) } function FormularioVisualizarBanca(n, t, i) { $.ajax({ type: "GET", dataType: "html", data: { CodigoBanca: n }, url: "/Banca/VisualizarBanca", success: function (n) { $("#formDialog").html(n); $("#formDialog").dialog({ width: 830, draggable: !1, modal: !0, resizable: !1, show: { effect: "blind", duration: 1e3 }, position: "top" }); $("#ListaDiretoriaVisualizar").attr("selecionado", t); $("#ListaDiretoriaVisualizar").autoPreencher($("#ListaEscolaVisualizar"), "Escola", "CarregarListaEscolas", null, i); $("#tabelaIntegrantesBanca").sedDataTable(); AplicarMascaras() }, error: function (n, t, i) { $(document).ajaxStop(function () { Mensagem.Alert({ titulo: "Erro", mensagem: "Ocorreu um erro durante o processo: " + i, tipo: "Erro", botao: "Fechar" }) }) } }) } function FormularioEditarBanca(n, t, i) { $.ajax({ type: "GET", dataType: "html", data: { CodigoBanca: n }, url: "/Banca/EditarBanca", success: function (r) { $("#formDialog").html(r); $("#formDialog").dialog({ width: 830, draggable: !1, modal: !0, resizable: !1, show: { effect: "blind", duration: 1e3 }, position: "top" }); $("#ListaDiretoriaEditar").attr("selecionado", t); $("#ListaDiretoriaEditar").autoPreencher($("#ListaEscolaEditar"), "Escola", "CarregarListaEscolas", null, i); SelecionaFuncionarioEscola("Editar"); $("#tabelaDadosEditar").sedDataTable(); CriaGridFuncionariosEdicao(); $("#FormEditar").validate({ rules: { CodigoDiretoria: "required", CodigoEscola: "required", CpfCriador: { required: !0, cpf: !0 }, DescricaoBanca: { required: !0, maxlength: 200 } }, messages: { CodigoDiretoria: "Obrigatório", CodigoEscola: "Obrigatório", CpfCriador: { required: "Obrigatório", cpf: "CPF inválido" }, DescricaoBanca: { required: "Obrigatório", maxlength: "Apenas 200 caracteres" } } }); $("#BtnEditar").click(function (t) { t.preventDefault(); $("#FormEditar").valid() && CriarArrayIntegrantesBancaEditar() == !0 && VerificarResponsavel("Editar") == !0 && VerificarParticipante("Editar") && $.ajax({ type: "POST", data: { CodigoDiretoria: $("#ListaDiretoriaEditar option:selected").val(), CodigoEscola: $("#ListaEscolaEditar option:selected").val(), DescricaoBanca: $("#DescricaoBanca").val(), CpfCriador: $("#CpfResponsavel").val(), CodigoBanca: $("#CodigoBanca").val(), CpfIntegranteBanca: $("#CpfIntegranteBanca").val(), Papel_Integrantes_Banca: $("#Papel_Integrantes_Banca").val() }, url: "/Banca/EditarBanca/" + n, success: function () { $("#formDialog").dialog("close"); $("#btnPesquisar").trigger("click") } }) }) } }) } function DeletarBanca(n) { confirm("Tem certeza que deseja excluir essa banca?") && $.ajax({ type: "POST", data: { CodigoBanca: n }, url: "/Banca/DeletarBanca/", success: function () { $("#btnPesquisar").trigger("click") } }) }
/*
//# sourceMappingURL=Banca.min.js.map
*/