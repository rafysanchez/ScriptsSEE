function ClickRadio(n){divEsconde==undefined?($(n).parents("div:first").parents("div:first").children("#divHabilidade"+n.val()).show(),divEsconde=n):$(divEsconde).parents("div:first").parents("div:first").parents("div:first").attr("id")==$(n).parents("div:first").parents("div:first").parents("div:first").attr("id")?($(divEsconde).parents("div:first").parents("div:first").children("#divHabilidade"+divEsconde.val()).hide(),$(n).parents("div:first").parents("div:first").children("#divHabilidade"+n.val()).show(),divEsconde=n):($(n).parents("div:first").parents("div:first").children("#divHabilidade"+n.val()).show(),$(divEsconde1).parents("div:first").parents("div:first").children("#divHabilidade"+divEsconde1.val()).hide(),divEsconde1=n)}function RecuperaNomeTipoAtividade_ExtraiSerie_VerificaBimestre(n){var s=$("#CodigoTipoAtividade option:selected").text(),u,f,t,i,r,e,o;$("#NomeTipoAtividade").attr("value",s);u=$("#ListaTurmaEditar option:selected").text().substring(0,1);$('input[name="serie"]').attr("value",u);f="/Atividade/VerificaDataBimestreValido";n=="Editar"?(t=$("input#DataPrevInicioEditar").val().substring(6,10)+"-"+$("input#DataPrevInicioEditar").val().substring(3,5)+"-"+$("input#DataPrevInicioEditar").val().substring(0,2),i=$("input#DataPrevFimEditar").val().substring(6,10)+"-"+$("input#DataPrevFimEditar").val().substring(3,5)+"-"+$("input#DataPrevFimEditar").val().substring(0,2),r=$(".selBimestre").val()):(t=$("input#DataPrevInicio").val().substring(6,10)+"-"+$("input#DataPrevInicio").val().substring(3,5)+"-"+$("input#DataPrevInicio").val().substring(0,2),i=$("input#DataPrevFim").val().substring(6,10)+"-"+$("input#DataPrevFim").val().substring(3,5)+"-"+$("input#DataPrevFim").val().substring(0,2),r=$("#ListaBimestreInserir").val());e=$("#Form"+n).find("[name=CodigoDiretoria]").val();o=$("#Form"+n).find("[name=CodigoEscola]").val();$.ajax({url:f,type:"GET",data:{CodigoDiretoria:e,CodigoEscola:o,DataPrevInicio:t,DataPrevFim:i,NumeroBimestre:r},success:function(t){if(t==!0){if(ValidarSelecoes(n)){MontarHiddenCurriculo();var i=RecuperarConteudoPlanejado();$("#PreCurriculo").val(i);n=="Editar"?$("#FormEditar").submit():$("#FormInserir").submit()}}else return Mensagem.CarregarMensagens("Fechar"),!1},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})}function ValidarSelecoes(n){var t=n=="Editar"?$("#FormEditar"):$("#FormInserir");return(t.find(".conteudo:checked").length===0||t.find(".habilidade:checked").length===0)&&$(".selDescricaoAtividade").val()===""?(alert("É obrigatória a seleção de um conteúdo e habilidade ou preencher a descrição da atividade"),!1):!0}function PesquisarAtividade(){var f,e,o,s,t=$("input#DataPrevistaI").val().substring(6,10),i=$("input#DataPrevistaF").val().substring(6,10),r=$("input#DataRealizacaoI").val().substring(6,10),u=$("input#DataRealizacaoF").val().substring(6,10),h=$("#ddlSerie").val(),n=$("#AnoLetivo").val();if(Date.parse(new Date(n,0,1))==NaN){alert("O ano letivo informado não é válido");return}if(t!=""&&t!=n||i!=""&&i!=n||r!=""&&r!=n||u!=""&&u!=n){alert("As datas selecionadas devem pertencer ao ano letivo informado");return}var c=t+"-"+$("input#DataPrevistaI").val().substring(3,5)+"-"+$("input#DataPrevistaI").val().substring(0,2),l=i+"-"+$("input#DataPrevistaF").val().substring(3,5)+"-"+$("input#DataPrevistaF").val().substring(0,2),a=r+"-"+$("input#DataRealizacaoI").val().substring(3,5)+"-"+$("input#DataRealizacaoI").val().substring(0,2),v=u+"-"+$("input#DataRealizacaoF").val().substring(3,5)+"-"+$("input#DataRealizacaoF").val().substring(0,2);f=$("select#CodigoTurma").val()==""?-1:$("select#CodigoTurma").val();e=$("select#CodigoSubTurma").val()==""?0:$("select#CodigoSubTurma").val();o=$("select#CodigoDisciplina").val()==null?-1:$("select#CodigoDisciplina").val();s=$("select#CPF").val()==null?"":$("select#CPF").val();$.ajax({url:"/Atividade/PesquisarAtividadeParcial",type:"GET",data:{CodigoDiretoria:$("select#CodigoDiretoria").val(),CodigoEscola:$("select#CodigoEscola").val(),CodigoTurma:f,CodigoSubTurma:e,CodigoDisciplina:o,CodigoTipoEnsino:$("select#CodigoTipoEnsino").val(),CPF:s,DataPrevInicio:c,DataPrevFim:l,HoraPrevInicio:$("input#HoraPrevistaI").val(),HoraPrevFim:$("input#HoraPrevistaF").val(),DataRealizadoInicio:a,DataRealizadoFim:v,HoraRealizadoInicio:$("input#HoraRealizacaoI").val(),HoraRealizadoFim:$("input#HoraRealizacaoF").val(),AnoLetivo:n,NumeroBimestre:$("#NumeroBimestre").val(),serie:h},success:function(n){$("div#dadosAtividade").html(n);$("#tabelaDados").dataTable({sScrollX:"200%",bJQueryUI:!0,oLanguage:{sProcessing:"Carregando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"Não foram encontrados resultados",sInfo:"Mostrando de _START_ até _END_ de _TOTAL_ registros",sInfoEmpty:"Mostrando de 0 até 0 de 0 registros",sInfoFiltered:"(filtrado de _MAX_ registros no total)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",oPaginate:{sFirst:"Primeiro",sPrevious:"Anterior",sNext:"Seguinte",sLast:"Último"}}})}})}function MudaStatus(n){var t=n.id,i=$(n).is(":checked");$.ajax({url:"/Atividade/MudaStatus",type:"GET",data:{cdAtividade:t,status:i},sucess:function(n){n==!1&&Mensagem.CarregarMensagens("Fechar")}})}function FormularioConsultarAtividade(n,t,i,r,u,f){$.ajax({type:"POST",dataType:"html",data:{cdAtividade:n,cdEscola:i},url:"/Atividade/ConsultarAtividade",success:function(n){$("#formDialog").html(n);$("#formDialog").dialog({width:830,draggable:!1,modal:!0,resizable:!1,show:{effect:"blind",duration:1e3},position:"top",close:function(){$("#formDialog").html("")}});AplicarMascaras();$("#pesoNota").mask("99");f!=undefined&&f&&$("nav#btnsContainer").show();CarregarEdicao();$(".selDisciplinaSelecionada, .selCurriculoSelecionado").attr("disabled","disabled")},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})}function FormularioEditarAtividade(n,t,i){$.ajax({type:"POST",dataType:"html",data:{cdAtividade:n,cdEscola:i},url:"/Atividade/EditarAtividade",success:function(n){$("#formDialog").html(n);mandeiFechar=!1;$("#formDialog").dialog({width:830,draggable:!1,modal:!0,resizable:!1,show:{effect:"blind",duration:1e3},position:"top",close:function(){$("#formDialog").html("");$("#formDialog").dialog("close");AtualizarCalendario()},beforeClose:function(){return mandeiFechar?!0:(Mensagem.Alert({titulo:"Atenção!",mensagem:'Os dados inseridos não foram salvos. Deseja continuar?<br />OBS.: Para salvar os dados, clique no botão "Cadastrar" localizado no final da página!',tipo:"aviso",botoes:[{botao:"Sim",callback:function(){mandeiFechar=!0;$("#formDialog").dialog("close");$.unblockUI()}},{botao:"Não",callback:function(){$.unblockUI()}}]}),!1)}});InicializarPlanejamentoConteudo();$("#ListaTipoEnsinoEditar").autoPreencher($("#ListaTurmaEditar"),"Turma","CarregarListaTodasTurmasPorTipoEnsino",["CodigoEscola","CodigoTipoEnsino"],null,$("#FormEditar"),!1);AplicarMascaras();$("#selNotaEditar").val()==1?($("select#valeNota").val(1),$("input#pesoNota").prop("disabled",!1)):$("input#pesoNota").val(0).prop("disabled",!0);$("#selValeNotaEditar").val()=="False"&&($("#valeNota").prop("disabled",!0),$("#divPesoNotaEditar").hide());$("#pesoNota").mask("99");$("#DataPrevInicioEditar").datepicker("option","numberOfMonths",1).datepicker("option","onSelect",function(n){$("#DataPrevFimEditar").datepicker("option","minDate",n)});$("#DataPrevFimEditar").datepicker("option","numberOfMonths",1).datepicker("option","onSelect",function(n){$("#DataPrevInicioEditar").datepicker("option","maxDate",n)});$("#DataRealizadoInicioEditar").datepicker("option","numberOfMonths",1).datepicker("option","onSelect",function(n){$("#DataRealizadoFimEditar").datepicker("option","minDate",n)});$("#DataRealizadoFimEditar").datepicker("option","numberOfMonths",1).datepicker("option","onSelect",function(n){$("#DataRealizadoInicioEditar").datepicker("option","maxDate",n)});$("#FormEditar").validate({rules:{CodigoTipoAtividade:"required",NomeEventoCalendario:"required",Apelido:"required",NumeroBimestre:"required",ValeNota:"required",PesoNota:"required",CodigoDiretoria:"required",CodigoEscola:"required",CodigoTipoEnsino:"required",CodigoTurma:"required",CodigoDisciplina:{required:{depends:function(){return!$(".selMultidisciplinar").prop("checked")}}},DataPrevInicio:{required:!0,dataValida:!0},DataPrevFim:{required:!0,dataValida:!0},DataRealizadoInicio:{dataValida:!0},DataRealizadoFim:{dataValida:!0},HoraPrevInicio:{horaValida:!0},HoraPrevFim:{horaValida:!0},HoraRealizadoInicio:{horaValida:!0},HoraRealizadoFim:{horaValida:!0}},messages:{CodigoTipoAtividade:"Obrigatório",NomeEventoCalendario:"Obrigatório",Apelido:"Obrigatório",NumeroBimestre:"Obrigatório",ValeNota:"Obrigatório",PesoNota:"Obrigatório",CodigoDiretoria:"Obrigatório",CodigoEscola:"Obrigatório",CodigoTipoEnsino:"Obrigatório",CodigoTurma:"Obrigatório",CodigoDisciplina:"Obrigatório",DataPrevInicio:{required:"Obrigatório",dataValida:"Data Inválida"},DataPrevFim:{required:"Obrigatório",dataValida:"Data Inválida"},DataRealizadoInicio:"Data Inválida",DataRealizadoFim:"Data Inválida",HoraPrevInicio:"Hora Inválida",HoraPrevFim:"Hora Inválida",HoraRealizadoInicio:"Hora Inválida",HoraRealizadoFim:"Hora Inválida"}});ChangeValeNota();$("#BotaoSalvar").click(function(n){if(n.preventDefault(),$("#FormEditar").valid())mandeiFechar=!0,RecuperaNomeTipoAtividade_ExtraiSerie_VerificaBimestre("Editar");else return!1});CarregarEdicao()},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})}function FormularioInserirAtividade(n,t){var e=0,u=0,i=0,f=0,r=$(".selIdsContainer"),o=r.length>0;o&&(e=r.find(".selCodigoDiretoria").val(),u=r.find(".selCodigoEscola").val(),i=r.find(".selCodigoTurma").val(),f=r.find(".selCodigoSubTurma").val());$.post("/Atividade/InserirAtividade",{cdturma:i,cdEscola:u,dtInicio:n},function(r){if($("#formDialog").html(r),mandeiFechar=!1,$("#formDialog").dialog({width:830,draggable:!1,modal:!0,resizable:!1,show:{effect:"blind",duration:1e3},position:"top",close:function(){$("#formDialog").html("");$("#formDialog").dialog("close");AtualizarCalendario()},beforeClose:function(){return mandeiFechar?!0:(Mensagem.Alert({titulo:"Atenção!",mensagem:'Os dados inseridos não foram salvos. Deseja continuar?<br />OBS.: Para salvar os dados, clique no botão "Cadastrar" localizado no final da página!',tipo:"aviso",botoes:[{botao:"Sim",callback:function(){mandeiFechar=!0;$("#formDialog").dialog("close");$.unblockUI()}},{botao:"Não",callback:function(){$.unblockUI()}}]}),!1)}}),VerificarMudancaAnoLetivo($("#dropdownlistAnoLetivo"),$("#ListaDiretoriaInserir option[value='']"),$("#ListaEscolaInserir"),$("#ListaTipoEnsinoInserir"),$("#ListaTurmaInserir"),$("#ListaBimestreInserir"),$("#ddlSerieInserir2"),$("#ListaDisciplinaInserir")),ValidacoesInserir(),n!=undefined&&t!=undefined&&($("input#DataPrevInicio").val(n),$("input#DataPrevFim").val(t)),$("#ListaDisciplinaInserir").change(function(){if($(this).find("option:selected").text()!="Selecione..."){var n=i;n==0&&(n=$("#ListaTurmaInserir").val());ObterCurriculos(n,$(this).val());VerificarValeNota($(this).val())}}),o){$(".selCdDiretoria").val(e);$(".selCdEscola").val(u);$(".selCdTurma").val(i);$(".selCdSubTurma").val(f);var s=$(".selIdTurma[value="+i+"][sub="+f+"]").parents("tr");$(".selNomeTurma").val(s.find(".selNomeTurma").text());$(".selNomeSubTurma").val(s.find(".selNomeSubTurma").text());$("#ListaTipoEnsinoInserir").val(s.find(".selCodigoTipoEnsino").val())}else $("#ListaDiretoriaInserir").autoPreencher($("#ListaEscolaInserir"),"Escola","CarregarListaEscolas",undefined,undefined,undefined,undefined,escondeCurriculos),$("#ListaEscolaInserir").autoPreencher($("#ListaTipoEnsinoInserir"),"TipoEnsino","CarregarListaTiposEnsino",[{id:"CodigoEscola",AnoLetivo:"AnoLetivo"}],null,$("#FormInserir"),undefined,escondeCurriculos),$("#ListaTipoEnsinoInserir").autoPreencher($("#ListaTurmaInserir"),"Turma","CarregarListaTurmaPorTipoEnsino",["CodigoEscola","CodigoTipoEnsino","AnoLetivo"],undefined,$("#FormInserir"),undefined,escondeCurriculos),$("#ListaTurmaInserir").change(function(){CarregarSubTurmas($(this).val())}),$("#ListaTurmaInserir").autoPreencher($("#ListaBimestreInserir"),"Bimestre","CarregarListaBimestres",["CodigoTurma"],undefined,$("#abrangencia")),$("#ListaTurmaInserir").autoPreencher($("#ListaDisciplinaInserir"),"Disciplina","CarregarListaDisciplinasComQuebras",["CodigoTurma"],undefined,$("#abrangencia"),undefined,resetarListaDisciplinaInserir),$("#ListaTurmaInserir").autoPreencher($("#ddlSerieInserir2"),"Serie","ListaSerieMultisseriada",undefined,undefined,undefined,undefined,function(){$("#ddlSerieInserir2 option").length>1?($("#pSerieNome").show(),$("#pSerie").show()):($("#pSerieNome").hide(),$("#pSerie").hide())});$("#ListaBimestreInserir").change(function(){$(this).val()!=""?($("#ddlSerieInserir2, #ListaDisciplinaInserir").prop("disabled",!1),$("#ListaDisciplinaInserir").val()!=""&&$("#ListaDisciplinaInserir").trigger("change")):($("#ddlSerieInserir2 > option:first, #ListaDisciplinaInserir > option:first").prop("selected",!0),$("#ddlSerieInserir2, #ListaDisciplinaInserir").prop("disabled",!0),escondeCurriculos())});$("#ddlSerieInserir2").change(function(){VerificaSerie();$("#ListaDisciplinaInserir").trigger("change")})})}function CarregarSubTurmas(n){var t=$("#FormInserir").find("#CodigoSubTurma");t.empty();t.append(new Option("Selecione...","",!0,!0));n>0&&$.getJSON("/AtribuicaoAula/SubTurmas",{turma:n},function(n){$.each(n,function(n,i){t.append($("<option/>",{value:i.Value,text:i.Text}))})})}function escondeCurriculos(){$("#tabsCurriculo").empty()}function resetarListaDisciplinaInserir(){$("#ListaDisciplinaInserir").val("");escondeCurriculos()}function VerificaSerie(){var n=$("#ddlSerieInserir2").val(),t,r,i,u;if($(".abas#curriculo").tabs("enable"),n!=undefined&&n!=""){n=parseInt(n);t=[];$(".abas#curriculo > ul > li > a").each(function(){t.push(parseInt($(this).text().substr(0,1)))});r=$.inArray(n,t);$(".abas#curriculo").tabs("option","active",r);for(i in t)parseInt(i)!=r&&(u=$(".abas#curriculo > ul > li > a").eq(i).attr("href"),$(u).find(".conteudo, .habilidade").prop("checked",!1),$(".abas#curriculo").tabs("disable",parseInt(i)))}}function ValidacoesInserir(){AplicarMascaras();$("#pesoNota").mask("99");$("#DataPrevInicio").datepicker("option","numberOfMonths",1).datepicker("option","onSelect",function(n){var t,i;$("#DataPrevFim").datepicker("option","minDate",n);t=$("#DataPrevInicio").val();t.length==10&&(i=$(".selCdTurma").val(),$.post("CarregaDisciplinaPorAtribuicao",{cdTurma:i,dtInicio:t},function(n){$("#ListaDisciplinaInserir").empty();$("#ListaDisciplinaInserir").append("<option>Selecione...<\/option>");n.length>0?($(n).each(function(){$("#ListaDisciplinaInserir").append('<option value="'+this.value+'">'+this.text+"<\/option>")}),$("#ListaBimestreInserir").attr("disabled",!1)):($("#ListaBimestreInserir option")[0].selected=!0,$("#ListaBimestreInserir").attr("disabled","disabled"))}))});$("#DataPrevFim").datepicker("option","numberOfMonths",1).datepicker("option","onSelect",function(n){$("#DataPrevInicio").datepicker("option","maxDate",n)});$("#FormInserir").validate({rules:{CodigoTipoAtividade:"required",NomeEventoCalendario:"required",Apelido:"required",NumeroBimestre:"required",ValeNota:"required",PesoNota:"required",CodigoDiretoria:"required",CodigoEscola:"required",CodigoTipoEnsino:"required",CodigoTurma:"required",CodigoDisciplina:{required:{depends:function(){return!$(".selMultidisciplinar").prop("checked")}}},DataPrevInicio:{required:!0,dataValida:!0},DataPrevFim:{required:!0,dataValida:!0},DataRealizadoInicio:{dataValida:!0},DataRealizadoFim:{dataValida:!0},HoraPrevInicio:{horaValida:!0},HoraPrevFim:{horaValida:!0}},messages:{CodigoTipoAtividade:"Obrigatório",NomeEventoCalendario:"Obrigatório",Apelido:"Obrigatório",NumeroBimestre:"Obrigatório",ValeNota:"Obrigatório",PesoNota:"Obrigatório",CodigoDiretoria:"Obrigatório",CodigoEscola:"Obrigatório",CodigoTipoEnsino:"Obrigatório",CodigoTurma:"Obrigatório",CodigoDisciplina:"Obrigatório",DataPrevInicio:{required:"Obrigatório",dataValida:"Data Inválida"},DataPrevFim:{required:"Obrigatório",dataValida:"Data Inválida"},DataRealizadoInicio:"Data Inválida",DataRealizadoFim:"Data Inválida",HoraPrevInicio:"Hora Inválida",HoraPrevFim:"Hora Inválida"}});$("#BotaoSalvar").click(function(n){n.preventDefault();$("#FormInserir").valid()?(mandeiFechar=!0,RecuperaNomeTipoAtividade_ExtraiSerie_VerificaBimestre("Inserir")):$(".error").first().focus()})}function AbrirCalendario(n,t,i,r,u){linkButton=u;i==undefined&&r==undefined&&(i=(new Date).getFullYear(),r=("0"+((new Date).getMonth()+1)).slice(-2));r==0&&(i=i-1,r=12);r==13&&(i=i+1,r=1);$.ajax({type:"POST",cache:!1,url:"/Atividade/CalendarioTurma",data:{turmaId:n,subTurmaId:t,ano:i,mes:r},success:function(n){$("#calendarioAtividades").html(n).show();$("fieldset.fieldset").hide();$("#Mes").html(ObterMes(r));LimparCalendario()}})}function LimparCalendario(){$.expr[":"].contentIs=function(n,t,i){return $(n).text()===i[3]};$(":contentIs(DEMO)").remove();$("#dp_month").find(".month_blue_header_inner").each(function(){switch($(this).html()){case"domingo":$(this).html("Domingo");break;case"segunda-feira":$(this).html("Segunda-feira");break;case"terça-feira":$(this).html("Terça-feira");break;case"quarta-feira":$(this).html("Quarta-feira");break;case"quinta-feira":$(this).html("Quinta-feira");break;case"sexta-feira":$(this).html("Sexta-feira");break;case"sábado":$(this).html("Sábado")}});$("#dp_month").each(function(){for(var i,t=$(this).find(".month_blue_cell_inner"),n=0;n<t.length;n++)i=$(t[n]).find(".month_blue_cell_header").html(),isNaN(i)&&$(t[n]).find(".month_blue_cell_header").html("1")});$("#dp_month").each(function(){for(var i,f,r,u,e=0,t=$(this).find(".month_blue_cell_inner"),o=parseInt($(t).first().find(".month_blue_cell_header").html()),n=0;n<t.length;n++)if(u=parseInt($(t[n]).find(".month_blue_cell_header").html()),o+1==u||u==1&&u!=o){e=n;break}for(i=0,f=0;f<e;f++)for(r=0;r<7;r++)n=r*e+f,u=parseInt($(t[n]).find(".month_blue_cell_header").html()),u==1?i==0?(i=1,(r==0||r==6)&&$(t[n]).css("background-color","#FFF0F0")):i==1&&(i=2,$(t[n]).find(".month_blue_cell_header").html(""),$(t[n]).css("background-color","#EEEEEE")):i==0||i==2?($(t[n]).find(".month_blue_cell_header").html(""),$(t[n]).css("background-color","#EEEEEE")):(r==0||r==6)&&$(t[n]).css("background-color","#FFF0F0");i=0})}function FecharCalendario(){$("#calendarioAtividades").hide();$("fieldset.fieldset").show()}function ClonePrevista(){$("#DataPrevInicio").keyup(function(){var n=$(this).val();$("#DataPrevFim").val(n)})}function CloneRealizado(){$("#DataRealizadoInicio").click(function(){$("#DataPrevInicio").val()==$("#DataPrevFim").val()&&$("#DataRealizadoInicio").keyup(function(){ListaBimestreInserir;var n=$(this).val();$("#DataRealizadoFim").val(n)})})}function AbrirAtividade(n){var t=ObterCodigos(n);FormularioConsultarAtividade(n,t.cdDiretoria,t.cdEscola,t.cdTurma,t.cdDisciplina,!0)}function EditarAtividade(n){var t=ObterCodigos(n);FormularioEditarAtividade(n,t.cdDiretoria,t.cdEscola,t.cdTurma,t.cdDisciplina,t.tipoEnsino)}function ExcluirAtividade(n){Mensagem.Alert({titulo:"Atenção!",mensagem:"Deseja realmente excluir a Atividade?",tipo:"aviso",botoes:[{botao:"Sim",callback:function(){$.ajax({type:"POST",url:"/Atividade/DeletaAtividade",data:{cdAtividade:n},success:function(){$("#formDialog").dialog("close");$(".ui-dialog-content").dialog("close");$(".ui-dialog-content").html("");$("#formDialog").html("");$("#formDialog").empty();$(linkButton).click();AtualizarCalendario()}})}},{botao:"Não",callback:function(){$.unblockUI()}}]})}function CriarAtividade(n,t){var i=("0"+(n.d.getDate()+1)).slice(-2)+"/"+("0"+(n.d.getMonth()+1)).slice(-2)+"/"+n.d.getFullYear(),r=("0"+t.d.getDate()).slice(-2)+"/"+("0"+(t.d.getMonth()+1)).slice(-2)+"/"+t.d.getFullYear();$.ajax({cache:!1,global:!1,url:"/Atividade/ValidarPeriodoAtividade",type:"POST",datatype:"JSON",data:{codigoDiretoria:$(".selCodigoDiretoria").val(),codigoEscola:$(".selCodigoEscola").val(),dataInicio:i,dataFim:r},traditional:!0,success:function(n){n==!0?FormularioInserirAtividade(i,r):Mensagem.CarregarMensagens("Fechar")}})}function ObterCodigos(n){var t=$(".selCodigoAtividade[value="+n+"]").parent(),i=t.find(".selCodigoDiretoria").val(),r=t.find(".selCodigoEscola").val(),u=t.find(".selCodigoTurma").val(),f=t.find(".selCodigoDisciplina").val(),e=t.find(".selTipoEnsino").val();return{cdAtividade:n,cdDiretoria:i,cdEscola:r,cdTurma:u,cdDisciplina:f,tipoEnsino:e}}function ObterMes(n){switch(n){case"01":case 1:return"Janeiro";case"02":case 2:return"Fevereiro";case"03":case 3:return"Março";case"04":case 4:return"Abril";case"05":case 5:return"Maio";case"06":case 6:return"Junho";case"07":case 7:return"Julho";case"08":case 8:return"Agosto";case"09":case 9:return"Setembro";case"10":case 10:return"Outubro";case"11":case 11:return"Novembro";case"12":case 12:return"Dezembro";default:return"Indefinido"}}function ObterDisciplinas(n){$.ajax({type:"GET",cache:!1,async:!1,url:"/Disciplina/CarregarListaDisciplinasComQuebras",data:{CodigoTurma:n,AnoLetivo:parseInt($("#DataPrevInicio").val().substr(6,4))},success:function(t){$(t).each(function(){$(".selTabelaDisciplinas .selDisciplinaId[value="+this.value+"]").length===0&&$(".selTabelaDisciplinas tbody").append('<tr><td class="botao_atividade"><input type="hidden" value="'+this.value+'" class="selDisciplinaId" /><input type="hidden" value="'+n+'" class="selTurmaId" /><input type="checkbox" class="selDisciplinaSelecionada" /><\/td><td class="ellipsis">'+this.text+"<\/td><\/tr>")});$(".selDisciplinaSelecionada").off("change").on("change",function(){var n=$(this).parent();$(this).prop("checked")?ObterCurriculos(n.find(".selTurmaId").val(),n.find(".selDisciplinaId").val()):$(".selDisciplinaAssociadaId[value="+n.find(".selDisciplinaId").val()+"]").parents("tr").remove()})}})}function RemoverTurma(n){if(confirm("Deseja Excluir Abrangência da Atividade?")){var t=n.find(".selTurmaId").val();return n.remove(),$(".selTabelaDisciplinas").find(".selTurmaId[value="+t+"]").parents("tr").remove(),!0}return!1}function MontarHiddenCurriculo(){$(".selDivSerie").each(function(){var n=GerarIndice();$("#hdnCurriculos").append('<input type="hidden" name="Curriculos.Index" value="'+n+'" /><input type="hidden" name="Curriculos['+n+'].NrSerie" value="'+$(this).find(".selSerie").val()+'" />');$(this).find(".selHabilidade:checked").each(function(){var t=GerarIndice();$("#hdnCurriculos").append('<input type="hidden" name="Curriculos['+n+'].ListaHabilidadeCurriculo.Index" value="'+t+'" /><input type="hidden" name="Curriculos['+n+"].ListaHabilidadeCurriculo["+t+'].CodigoConteudo" value="'+$(this).parent().siblings(".selCodigoConteudo").val()+'" /><input type="hidden" name="Curriculos['+n+"].ListaHabilidadeCurriculo["+t+'].CodigoHabilidade" value="'+$(this).val()+'" />')})})}function MontarHiddensDisciplinasCurriculos(){var t=$(".selDisciplinaSelecionada:checked").siblings(".selDisciplinaId"),n;t.each(function(){var n=GerarIndice();$(".selTabelaDisciplinas").siblings(".selHiddensContainer").append('<input type="hidden" name="Disciplinas.Index" value="'+n+'" /><input type="hidden" name="Disciplinas['+n+'].CD_DISCIPLINA" value="'+$(this).val()+'" />')});n=$(".selCurriculoSelecionado:checked").siblings(".selCurriculoId");n.each(function(){var n=GerarIndice();$(".selTabelaCurriculos").siblings(".selHiddensContainer").append('<input type="hidden" name="Curriculos.Index" value="'+n+'" /><input type="hidden" name="Curriculos['+n+'].Cod_Curriculo_Item" value="'+$(this).val()+'" />')})}function CarregarEdicao(){CarregarCurriculos()}function CarregarCurriculos(){$(".selTabelaDisciplinas .selDisciplinaSelecionada:checked").siblings(".selDisciplinaId").each(function(){ObterCurriculos($(this).siblings(".selTurmaId").val(),$(this).val())});$(".selHiddensCurriculos .selCurriculoId").each(function(){$(".selTabelaCurriculos .selCurriculoId[value="+$(this).val()+"]").siblings(".selCurriculoSelecionado").prop("checked",!0)})}function ObterCurriculos(n,t){var i=$("#dropdownlistAnoLetivo").val(),r=$("#ListaBimestreInserir").val(),u=$("#ListaTipoEnsinoInserir").val(),f=$("#ddlSerieInserir2").val()==""?0:parseInt($("#ddlSerieInserir2").val());listaDisciplina=[];listaTurma=[];listaCurriculo2=[];listaDisciplina.push({Disciplina:{CD_DISCIPLINA:t}});listaTurma.push({Turma:{CD_TURMA:n}});listaCurriculo2.push({Curriculo:{AnoLetivo:i,Bimestre:r,CD_TIPO_ENSINO:u}});$.ajax({type:"POST",url:"/Atividade/CurriculoParcial",data:{listaTurma:JSON.stringify(listaTurma),listaDisciplina:JSON.stringify(listaDisciplina),curriculo:JSON.stringify(listaCurriculo2),serie:f},success:function(n){$(n).each(function(){$("#tabsCurriculo").empty();$("#tabsCurriculo").html(n);InicializarPlanejamentoConteudo();VerificaSerie()})}})}function FecharDialog(n){n!=undefined&&n.Sucesso==!0&&($("#formDialog").dialog("close"),$(".ui-dialog-content").dialog("close"),$(".ui-dialog-content").html(""),$("#formDialog").html(""),$("#formDialog").empty(),$(linkButton).click())}function FecharDialogAtualizar(n){FecharDialog(n);PesquisarAtividade()}function HabilitaAdicionar(n){$(n).val().length>0?$(".selAddTurma").prop("disabled",""):$(".selAddTurma").prop("disabled","disabled")}function VerificarValeNota(n){var t=$("#ddlSerieInserir2").val();(t===undefined||t==="")&&(t=0);$.ajax({type:"POST",url:"/Atividade/VerificarValeNota",data:{cdTipoEnsino:$("#ListaTipoEnsinoInserir").val(),cdDisciplina:n,anoLetivo:$("#dropdownlistAnoLetivo").val(),serie:t},success:function(n){n.ValeNota?($("#valeNota").prop("disabled",!1),$("#divPesoNota").show()):($("#valeNota").prop("disabled",!0),$("#pesoNota").val(0),$("#divPesoNota").hide());$("#valeNota").val()=="0"?($("#pesoNota").val("0"),$("#pesoNota").attr("disabled","disabled")):$("#pesoNota").removeAttr("disabled")}})}function ChangeValeNota(){$("#valeNota").val()=="0"?$("#pesoNota").val(0).prop("disabled",!0):$("#pesoNota").prop("disabled",!1)}var anoLetivoAnterior,linkButton,mandeiFechar,VerificarMudancaAnoLetivo=function(n,t,i,r,u,f,e,o){n.get(0).tagName=="INPUT"?(n.focus(function(){anoLetivoAnterior=n.val();$(document).keypress(function(n){if(n.which==13)return!1})}),n.blur(function(){var n=$(this).val();n!=anoLetivoAnterior&&s($(this),anoLetivoAnterior)})):n.get(0).tagName=="SELECT"&&(n.click(function(){anoLetivoAnterior=n.val()}),n.change(function(){s($(this),anoLetivoAnterior)}));var s=function(n,s){Mensagem.Alert({titulo:"Atenção!",mensagem:"Ao alterar o valor do ano letivo, todos os dados informados no formulário serão perdidos. Deseja continuar?",tipo:"aviso",botoes:[{botao:"Sim",callback:function(){var s="<option value=''>Selecione...<\/option>";t.attr("selected","selected");i.empty();i.html(s);r.empty();r.html(s);u.empty();u.html(s);f.empty();f.html(s);o.empty();o.html(s);e.empty();e.html(s);AnoLetivoAnterior=$(n).val();$("#dadosAtividade").empty();$.unblockUI()}},{botao:"Não",callback:function(){$(n).val(s);$.unblockUI();$(n).focus()}}]})}},divEsconde,divEsconde1,AtualizarCalendario=function(){$("#hdfAnoCalendario").val()!=undefined&&$("#hdfMesCalendario").val()!=undefined&&$("#hdfTurmaCalendario").val()!=undefined&&(mes=$("#hdfMesCalendario").val(),mes<10&&(mes="0"+mes.toString()),$.ajax({type:"POST",cache:!1,url:"/Atividade/CalendarioTurma",data:{turmaId:$("#hdfTurmaCalendario").val(),ano:$("#hdfAnoCalendario").val(),mes:$("#hdfMesCalendario").val()},success:function(n){$("#calendarioAtividades").html(n);$("#Mes").html(ObterMes(mes));LimparCalendario()}}))},DeletarAtividade=function(n){var t=confirm("Tem certeza que deseja excluir essa atividade?");t&&$.ajax({url:"/Atividade/DeletaAtividade",type:"POST",data:{cdAtividade:n},success:function(n){n&&PesquisarAtividade()}})},VerificarDiasLetivosCalendario=function(n,t,i,r,u){var f;(f=typeof n=="string"?$("#"+n):$(n),f!=null&&f!=undefined)&&$.ajax({cache:!1,url:"/CalendarioEscolar/ConsultarDiasLetivos",type:"POST",datatype:"JSON",data:{codigoDiretoria:t,codigoEscola:i,anoLetivo:r,mes:u},traditional:!0,success:function(n){$(f).find(".month_blue_cell_inner").each(function(){for(var i,r=parseInt($(this).find(".month_blue_cell_header").html()),t=0;t<n.length;t++)if(i=parseInt(n[t].Dia),i==r){n[t].Letivo==!1?$(this).css("background-color","rgb(255, 240, 240)"):$(this).css("background-color","rgb(255, 255, 255)");break}})},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})};
/*
//# sourceMappingURL=Atividades.min.js.map
*/