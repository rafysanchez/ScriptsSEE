function Novo(){$.ajax({type:"GET",cache:!1,dataType:"html",url:"/Responsavel/Cadastrar",success:function(n){$("#VisualizarResponsavel").empty();$("#EditarResponsavel").empty();$("#NovoResponsavel").empty().html(n);var t=$("#NovoResponsavel")[0],i=$(t).clone().attr("id","NovoResponsavelClone"),r=$(t).html();$(t).html("");$(i).dialog({width:850,draggable:!1,modal:!0,resizable:!1,show:{effect:"blind",duration:1e3},position:"top",open:function(){$("#btnExcluir").remove();$("#btnAlterar").remove();$("#NomeResponsavel").prop("disabled","");$("#Sexo").prop("disabled","");$("#EstadoCivil").prop("disabled","");$("#CpfResponsavel").prop("disabled","");$("#RgResponsavel").prop("disabled","");$("#DigRgResponsavel").prop("disabled","");$("#SiglaUFRG").prop("disabled","");$("#EmailResponsavel").prop("disabled","");$("#DataNascimento").prop("disabled","");$("#CidadeNascimento").prop("disabled","");$("#SiglaUFNascimento").prop("disabled","");$("#NomePaisNascimento").prop("disabled","");$("#EnderecoResponsavel").prop("disabled","");$("#NumeroEndereco").prop("disabled","");$("#ComplementoEndereco").prop("disabled","");$("#NomeBairro").prop("disabled","");$("#Cep").prop("disabled","");$("#Cidade").prop("disabled","");$("#SiglaUF").prop("disabled","");$("#btnSalvar").prop("disabled","");$("#titulo").empty().html("Cadastro de Responsável");$("#btnSalvar").prop("value","Cadastrar Responsável");$("#tbTelefone").sedDataTable();$("#TipoOrigem").val()=="1"?($("#RNE").prop("disabled",!0),$("#RgResponsavel").prop("disabled",!1),$("#DigRgResponsavel").prop("disabled",!1),$("#SiglaUFRG").prop("disabled",!1),$("#CidadeNascimento").prop("disabled",!1),$("#SiglaUFNascimento").prop("disabled",!1)):($("#RNE").prop("disabled",!1),$("#RgResponsavel").prop("disabled",!0),$("#DigRgResponsavel").prop("disabled",!0),$("#SiglaUFRG").prop("disabled",!0),$("#CidadeNascimento").prop("disabled",!0),$("#SiglaUFNascimento").prop("disabled",!0));$("#TipoOrigem").change(function(){$("#TipoOrigem").val()=="1"?($("#RNE").prop("disabled",!0),$("#RgResponsavel").prop("disabled",!1),$("#DigRgResponsavel").prop("disabled",!1),$("#SiglaUFRG").prop("disabled",!1),$("#CidadeNascimento").prop("disabled",!1),$("#SiglaUFNascimento").prop("disabled",!1),$("#RNE").val("")):($("#RNE").prop("disabled",!1),$("#RgResponsavel").prop("disabled",!0),$("#DigRgResponsavel").prop("disabled",!0),$("#SiglaUFRG").prop("disabled",!0),$("#CidadeNascimento").prop("disabled",!0),$("#SiglaUFNascimento").prop("disabled",!0),$("#RgResponsavel").val(""),$("#DigRgResponsavel").val(""),$("#SiglaUFRG").val(""),$("#CidadeNascimento").val(""),$("#SiglaUFNascimento").val(""))});$("#btnAdicionarTelefone").click(function(){var r=$("#ddlTipoTelefone option:selected").text(),n=$("#ddlTipoTelefone").val(),t=$("#txtDDD").val(),i=$("#txtNumTelefone").val(),u=$("#txtComplTelefone").val();n.length>0&&t.length>0&&i.length>0?AdicionarTelefone(r,n,t,i,u):Mensagem.Alert({titulo:"Aviso",mensagem:"Para cadastrar um novo telefone informe o tipo, DDD e número.",tipo:"Aviso",botao:"Fechar"})});$("#frmResponsavel").validate({rules:{NomeResponsavel:{nome:!0,required:!0},Sexo:{required:!0},CpfResponsavel:{cpf:!0,required:{depends:function(){return $("#TipoOrigem").val()=="1"}}},RgResponsavel:{required:!0,RG:!0},DigRgResponsavel:{digRG:!0},SiglaUFRG:{required:!0},EmailResponsavel:{required:!0,email:!0},EnderecoResponsavel:{endereco:!0},ComplementoEndereco:{endereco:!0},NumeroEndereco:{numEndereco:!0},NomeBairro:{nome:!0},Cep:{cep:!0},Cidade:{nome:!0},DataNascimento:{dataValida:!0,required:!0},CidadeNascimento:{nome:!0},NomePaisNascimento:{nome:!0},txtDDD:{number:!0},txtNumTelefone:{number:!0},RNE:{required:!0}},messages:{NomeResponsavel:{nome:"Carácter inválido",required:"Obrigatório"},Sexo:{required:"Obrigatório"},CpfResponsavel:{cpf:"CPF inválido",required:"Obrigatório"},RgResponsavel:{required:"",RG:"Carácter inválido"},DigRgResponsavel:{digRG:"Carácter inválido"},SiglaUFRG:{required:"Obrigatório"},EmailResponsavel:{required:"Obrigatório",email:"E-mail inválido"},EnderecoResponsavel:{endereco:"Carácter inválido"},ComplementoEndereco:{endereco:"Carácter inválido"},NumeroEndereco:{numEndereco:"Informe apenas números"},NomeBairro:{nome:"Carácter inválido"},Cep:{cep:"Carácter inválido"},Cidade:{nome:"Carácter inválido"},DataNascimento:{dataValida:"Data inválida",required:"Obrigatório"},CidadeNascimento:{nome:"Carácter inválido"},NomePaisNascimento:{nome:"Carácter inválido"},txtDDD:{number:"Informe apenas números"},txtNumTelefone:{number:"Informe apenas números"},RNE:{required:"Obrigatório"}}});$("#btnSalvar").click(function(n){if(n.preventDefault(),$("#frmResponsavel").valid())Cadastrar();else return!1})},close:function(){$(i).remove();$(t).empty()}});AplicarMascaras()},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})}function Editar(n){$.ajax({type:"POST",cache:!1,dataType:"html",data:{Id:n},url:"/Responsavel/Editar",success:function(n){$(".ui-dialog").is(":visible")==!0&&$("#VisualizarResponsavelClone").dialog("close");$("#NovoResponsavel").empty();$("#VisualizarResponsavel").empty();$("#EditarResponsavel").empty().html(n);var t=$("#EditarResponsavel")[0],i=$(t).clone().attr("id","EditarResponsavelClone"),r=$(t).html();$(t).html("");$(i).dialog({width:850,draggable:!1,modal:!0,resizable:!1,show:{effect:"blind",duration:1e3},position:"top",open:function(){$("#btnExcluir").remove();$("#btnAlterar").remove();$("#NomeResponsavel").prop("disabled","");$("#Sexo").prop("disabled","");$("#EstadoCivil").prop("disabled","");$("#CpfResponsavel").prop("disabled","");$("#RgResponsavel").prop("disabled","");$("#DigRgResponsavel").prop("disabled","");$("#SiglaUFRG").prop("disabled","");$("#EmailResponsavel").prop("disabled","");$("#DataNascimento").prop("disabled","");$("#CidadeNascimento").prop("disabled","");$("#SiglaUFNascimento").prop("disabled","");$("#NomePaisNascimento").prop("disabled","");$("#EnderecoResponsavel").prop("disabled","");$("#NumeroEndereco").prop("disabled","");$("#ComplementoEndereco").prop("disabled","");$("#NomeBairro").prop("disabled","");$("#Cep").prop("disabled","");$("#Cidade").prop("disabled","");$("#SiglaUF").prop("disabled","");$("#TipoOrigem").prop("disabled","disabled");$("#TipoOrigem").val()=="1"?($("#RNE").prop("disabled",!0),$("#RgResponsavel").prop("disabled",!1),$("#DigRgResponsavel").prop("disabled",!1),$("#SiglaUFRG").prop("disabled",!1),$("#CidadeNascimento").prop("disabled",!1),$("#SiglaUFNascimento").prop("disabled",!1)):($("#RNE").prop("disabled",!1),$("#RgResponsavel").prop("disabled",!0),$("#DigRgResponsavel").prop("disabled",!0),$("#SiglaUFRG").prop("disabled",!0),$("#CidadeNascimento").prop("disabled",!0),$("#SiglaUFNascimento").prop("disabled",!0));$("#TipoOrigem").change(function(){$("#TipoOrigem").val()=="1"?($("#RNE").prop("disabled",!0),$("#RgResponsavel").prop("disabled",!1),$("#DigRgResponsavel").prop("disabled",!1),$("#SiglaUFRG").prop("disabled",!1),$("#CidadeNascimento").prop("disabled",!1),$("#SiglaUFNascimento").prop("disabled",!1),$("#RNE").val("")):($("#RNE").prop("disabled",!1),$("#RgResponsavel").prop("disabled",!0),$("#DigRgResponsavel").prop("disabled",!0),$("#SiglaUFRG").prop("disabled",!0),$("#CidadeNascimento").prop("disabled",!0),$("#SiglaUFNascimento").prop("disabled",!0),$("#RgResponsavel").val(""),$("#DigRgResponsavel").val(""),$("#SiglaUFRG").val(""),$("#CidadeNascimento").val(""),$("#SiglaUFNascimento").val(""))});$("#btnSalvar").prop("disabled","");$("#titulo").empty().html("Edição de Responsável");$("#btnSalvar").prop("value","Alterar Responsável");$("#tbTelefone").sedDataTable();$("#tbTelefone tbody tr").each(function(){switch($(this).find("td").first().text()){case"1":$(this).find("td").first().text("Residencial");break;case"2":$(this).find("td").first().text("Comercial");break;case"3":$(this).find("td").first().text("Celular");break;case"4":$(this).find("td").first().text("Recado")}});$("#btnAdicionarTelefone").click(function(){var r=$("#ddlTipoTelefone option:selected").text(),n=$("#ddlTipoTelefone").val(),t=$("#txtDDD").val(),i=$("#txtNumTelefone").val(),u=$("#txtComplTelefone").val();n.length>0&&t.length>0&&i.length>0?AdicionarTelefone(r,n,t,i,u):Mensagem.Alert({titulo:"Aviso",mensagem:"Para cadastrar um novo telefone informe o tipo, DDD e número.",tipo:"Aviso",botao:"Fechar"})});$("#frmResponsavel").validate({rules:{NomeResponsavel:{nome:!0,required:!0},Sexo:{required:!0},CpfResponsavel:{cpf:!0,required:{depends:function(){return $("#TipoOrigem").val()=="1"}}},RgResponsavel:{required:!0,RG:!0},DigRgResponsavel:{digRG:!0},SiglaUFRG:{required:!0},EmailResponsavel:{required:!0,email:!0},EnderecoResponsavel:{endereco:!0},ComplementoEndereco:{endereco:!0},NumeroEndereco:{numEndereco:!0},NomeBairro:{nome:!0},Cep:{cep:!0},Cidade:{nome:!0},DataNascimento:{dataValida:!0,required:!0},CidadeNascimento:{nome:!0},NomePaisNascimento:{nome:!0},txtDDD:{number:!0},txtNumTelefone:{number:!0}},messages:{NomeResponsavel:{nome:"Carácter inválido",required:"Obrigatório"},Sexo:{required:"Obrigatório"},CpfResponsavel:{cpf:"CPF inválido",required:"Obrigatório"},RgResponsavel:{required:"",RG:"Carácter inválido"},DigRgResponsavel:{digRG:"Carácter inválido"},SiglaUFRG:{required:"Obrigatório"},EmailResponsavel:{required:"Obrigatório",email:"E-mail inválido"},EnderecoResponsavel:{endereco:"Carácter inválido"},ComplementoEndereco:{endereco:"Carácter inválido"},NumeroEndereco:{numEndereco:"Informe apenas números"},NomeBairro:{nome:"Carácter inválido"},Cep:{cep:"Carácter inválido"},Cidade:{nome:"Carácter inválido"},DataNascimento:{dataValida:"Data Inválida",required:"Obrigatório"},CidadeNascimento:{nome:"Carácter inválido"},NomePaisNascimento:{nome:"Carácter inválido"},txtDDD:{number:"Informe apenas números"},txtNumTelefone:{number:"Informe apenas números"}}});$("#btnSalvar").click(function(n){if(n.preventDefault(),$("#frmResponsavel").valid())Cadastrar();else return!1})},close:function(){$(i).remove();$(t).empty()}});AplicarMascaras()},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})}function Visualizar(n){$.ajax({type:"POST",async:!0,cache:!1,dataType:"html",data:{Id:n},url:"/Responsavel/Visualizar",success:function(n){$("#NovoResponsavel").empty();$("#EditarResponsavel").empty();$("#VisualizarResponsavel").empty().html(n);var t=$("#VisualizarResponsavel")[0],i=$(t).clone().attr("id","VisualizarResponsavelClone"),r=$(t).html();$(t).html("");$(i).dialog({width:850,draggable:!1,modal:!0,resizable:!1,show:{effect:"blind",duration:1e3},position:"top",open:function(){$("#divTelefone").remove();$(".edicao").remove();$("#btnSalvar").remove();$("#NomeResponsavel").prop("disabled","disabled");$("#Sexo").prop("disabled","disabled");$("#EstadoCivil").prop("disabled","disabled");$("#CpfResponsavel").prop("disabled","disabled");$("#RgResponsavel").prop("disabled","disabled");$("#DigRgResponsavel").prop("disabled","disabled");$("#SiglaUFRG").prop("disabled","disabled");$("#EmailResponsavel").prop("disabled","disabled");$("#DataNascimento").prop("disabled","disabled");$("#CidadeNascimento").prop("disabled","disabled");$("#SiglaUFNascimento").prop("disabled","disabled");$("#NomePaisNascimento").prop("disabled","disabled");$("#EnderecoResponsavel").prop("disabled","disabled");$("#NumeroEndereco").prop("disabled","disabled");$("#ComplementoEndereco").prop("disabled","disabled");$("#NomeBairro").prop("disabled","disabled");$("#Cep").prop("disabled","disabled");$("#Cidade").prop("disabled","disabled");$("#SiglaUF").prop("disabled","disabled");$("#TipoOrigem").prop("disabled","disabled");$("#RNE").prop("disabled","disabled");$("#EnvioSMS").prop("disabled","disabled");$("#btnExcluir").prop("disabled","");$("#btnAlterar").prop("disabled","");$("#titulo").empty().html("Consulta de Responsável");!1&&$("#frmResponsavel").find("#btnAlterar").remove();!1&&$("#frmResponsavel").find("#btnExcluir").remove();$("#tbTelefone").sedDataTable();$("#tbTelefone tbody tr").each(function(){switch($(this).find("td").first().text()){case"1":$(this).find("td").first().text("Residencial");break;case"2":$(this).find("td").first().text("Comercial");break;case"3":$(this).find("td").first().text("Celular");break;case"4":$(this).find("td").first().text("Recado")}})},close:function(){$(i).remove();$(t).empty()}});AplicarMascaras()},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})}function Cadastrar(){var n=$("#hdnCodigo").val(),i=$("#NomeResponsavel").val(),e=$("#Sexo").val(),r=$("#CpfResponsavel").val(),u=$("#RgResponsavel").val(),f=$("#DigRgResponsavel").val(),o=$("#SiglaUFRG").val(),t=$("#EmailResponsavel").val(),s=$("#EnderecoResponsavel").val(),h=$("#NumeroEndereco").val(),c=$("#ComplementoEndereco").val(),l=$("#NomeBairro").val(),a=$("#Cep").val(),v=$("#Cidade").val(),y=$("#SiglaUF").val(),p=$("#DataNascimento").val(),w=$("#CidadeNascimento").val(),b=$("#SiglaUFNascimento").val(),k=$("#NomePaisNascimento").val(),d=$("#EstadoCivil").val(),g=$("#tbTelefone tbody tr").find(".sorting_1").val(),nt=$("#RNE").val(),tt=$("#TipoOrigem").val(),it=$("#EnvioSMS").is(":checked");if(g==undefined&&t!=undefined&&t.length==0){$("<label class='error'>Obrigatório<\/label>").appendTo(".EmailResponsavel");$("<label class='error'>Obrigatório<\/label>").appendTo("#divTelefone");Mensagem.Alert({titulo:"Responsável",mensagem:"Informe um endereço de e-mail ou telefone.",tipo:"Erro",botao:"Fechar"});return}$.ajax({type:"POST",async:!0,cache:!1,dataType:"html",data:{CodigoResponsavel:n,NomeResponsavel:i,Sexo:e,CpfResponsavel:r,RgResponsavel:u,DigRgResponsavel:f,SiglaUFRG:o,EmailResponsavel:t,EnderecoResponsavel:s,NumeroEndereco:h,ComplementoEndereco:c,NomeBairro:l,Cep:a,Cidade:v,SiglaUF:y,DataNascimento:p,CidadeNascimento:w,SiglaUFNascimento:b,NomePaisNascimento:k,EstadoCivil:d,RNE:nt,TipoOrigem:tt,EnvioSMS:it},url:"/Responsavel/Cadastrar",success:function(){Mensagem.AdicionarCallback(function(t){t.find(".mensagem_botao .direita button").click(function(){if(t.find(".mensagem").hasClass("sucesso"))if(n==0)$("#NovoResponsavelClone").dialog("close");else{var e=$(".selCodigoResponsavelLista[value="+n+"]").parents("tr");e.find(".selNomeResponsavel").text(i);e.find(".selCpfResponsavel").text(r);e.find(".selRgResponsavel").text(u);e.find(".selDigRgResponsavel").text(f);$("#EditarResponsavelClone").dialog("close")}})})},error:function(){}})}function Alunos(n){$.ajax({type:"POST",async:!0,cache:!1,dataType:"html",data:{Id:n},url:"/ResponsavelAluno/Index",success:function(n){$("#Alunos").empty().html(n);var t=$("#Alunos")[0],i=$(t).clone().attr("id","AlunosClone"),r=$(t).html();$(t).html("");$(i).dialog({width:850,draggable:!1,modal:!0,resizable:!1,show:{effect:"blind",duration:1e3},position:"top",open:function(){!1&&$("#ddlTipo").prop("disabled","disabled");!1&&$(".excluir").remove();$("#tbAlunos").sedDataTable({sScrollX:"100%",sScrollXInner:"120%"})},close:function(){$(i).remove();$(t).empty()}})},error:function(n,t,i){$(document).ajaxStop(function(){Mensagem.Alert({titulo:"Erro",mensagem:"Ocorreu um erro durante o processo: "+i,tipo:"Erro",botao:"Fechar"})})}})}function ValidarPesquisa(){var n=$("#txtCpf").val(),t=$("#txtRg").val(),e=$("#txtRgDig").val(),i=$("#txtRgUf").val(),r=$("#txtNome").val(),u=$("#txtRne").val(),f;n!=""||t!=""&&i!=""||r!=""||u!=""?Pesquisar(n,t,e,i,u,r):(f="Preencha o filtro mínimo.",Mensagem.Alert({titulo:"Aviso",mensagem:f,tipo:"Aviso",botao:"Fechar"}))}function Pesquisar(n,t,i,r,u,f){$.ajax({type:"POST",async:!0,cache:!1,dataType:"html",data:{cpf:n,rg:t,digRg:i,ufRg:r,rne:u,nome:f},url:"/Responsavel/ListaParcial",success:function(n){$("#listaResponsaveis").html(n);$("#tabela").sedDataTable();AplicarMascaras()},error:function(){window.location.href="Index"}})}function ExcluirResponsavel(){var n=parseInt($("#hdnCodigo").val());Mensagem.Alert({titulo:"Responsável",mensagem:"Deseja realmente excluir o Responsável?",tipo:"aviso",botoes:[{botao:"Sim",callback:function(){$.ajax({type:"POST",async:!0,cache:!1,data:{codigoResponsavel:n},url:"/Responsavel/Excluir",success:function(){$("#VisualizarResponsavelClone").dialog("close");ValidarPesquisa()},error:function(){}})}},{botao:"Não",callback:function(){$.unblockUI()}}]})}function AdicionarTelefone(n,t,i,r,u){if($("#tbTelefone").html().indexOf(r)!=-1)return Mensagem.Alert({titulo:"Aviso",mensagem:"Este telefone já foi incluído para o responsável.",tipo:"Aviso",botao:"Fechar"}),!1;$.ajax({type:"POST",async:!0,cache:!1,data:{tipo:t,ddd:i,numero:r,complemento:u},url:"/Responsavel/AdicionarTelefone",success:function(){$("#tbTelefone").dataTable().fnDestroy();var f=$("#tbTelefone");f.append('<tr tipoFone="'+t+'"><td style="text-align: center">'+n+'<\/td><td style="text-align: center">'+i+'<\/td><td style="text-align: center">'+r+'<\/td><td style="text-align: center">'+u+"<\/td><td style='text-align: center'><a href='javascript:void(0)' onclick='RemoverTelefoneDaGrid(this,"+r+");'><i class='icone-tabela-excluir' title='Deletar'><\/i><\/a><\/td><\/tr>");f.sedDataTable();$("#ddlTipoTelefone").val("");$("#txtDDD").val("");$("#txtNumTelefone").val("");$("#txtComplTelefone").val("");$(".edicao").css("text-align","center")},error:function(){}})}function ExcluirTelefone(n){$.ajax({type:"POST",async:!0,cache:!1,data:{codigoTelefone:n},url:"/Responsavel/ExcluirTelefone",success:function(){var i=$("#"+n).closest("tr").get(0),t=$("#tbTelefone").dataTable();t.fnDeleteRow(t.fnGetPosition(i));VerificaQuantidadeCelular()},error:function(){}})}function RemoverTelefoneDaGrid(n,t){$.ajax({type:"POST",async:!0,cache:!1,data:{telefone:t},url:"/Responsavel/RemoveTelefone",success:function(){var t=$("#tbTelefone").dataTable(),i=$(n).closest("tr").get(0);t.fnDeleteRow(t.fnGetPosition(i));VerificaQuantidadeCelular()},error:function(){}})}function VerificaQuantidadeCelular(){var n=0;$("#tbTelefone > tbody > tr").each(function(){$(this).attr("tipoFone")==3&&n++});n==0&&$("#EnvioSMS").prop("checked",!1)}
/*
//# sourceMappingURL=Responsavel.min.js.map
*/